<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/WGuMUSEV1jbbZKweg-P-Pw)

1. 下载编译
=======

可直接下载官方的 release 包： https://archive.apache.org/dist/ofbiz/

解压后，idea 打开，这里可以配置一下 jdk11

![](https://mmbiz.qpic.cn/sz_mmbiz_png/e9icbmGX0KNLTnXTWKicvKFp0aib2O3vajXSNKcVia50Ojia8cHWGrSPZddb7hA1Fbhb3wmQgdyrxhXqjRxvP0H0cnw/640?wx_fmt=png&from=appmsg)

由于是 gradle 构建的项目，一般 idea 可以直接识别，点击 build 可直接编译

![](https://mmbiz.qpic.cn/sz_mmbiz_png/e9icbmGX0KNLTnXTWKicvKFp0aib2O3vajXiacb4rzEF7u2l2MaHfTon4kDxe2FzuaeVx6qjoP28HCdFVcAKia423AQ/640?wx_fmt=png&from=appmsg)

Build 完成后，会在项目目录下生成 build 文件夹，以及 ofbiz.jar 等文件。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/e9icbmGX0KNLTnXTWKicvKFp0aib2O3vajXtvo7pUZibdwBnU5WO9eXcqWaulK9ia8vTuUDPsu6d3Feqg6FKeuTlP8w/640?wx_fmt=png&from=appmsg)

2. 运行
=====

在 “edit congfigurations” 中添加 JAR Application

![](https://mmbiz.qpic.cn/sz_mmbiz_png/e9icbmGX0KNLTnXTWKicvKFp0aib2O3vajXBMZffmY67btQXxWdnnK24ytqNjQrhw5AXWss1rWmuhC8SJ8gceibhiag/640?wx_fmt=png&from=appmsg)

然后运行 debug 即可。

但此时是无法登陆后台的，需要 load data，使用如下命令

可以在 OFBiz 目录下运行`gradlew loadAll` 或 `java -jar build/libs/ofbiz.jar -l`

然后就会载入 "org/apache/ofbiz/base/start/load-data.properties" 中的配置

3. docker 方法构建
==============

（可以直接用 vulhub）

dockerfile 参考：

```
FROM openjdk:8-jdk

ARG VERSION=18.12.09
RUN set -ex \
    && cd /usr/src \
    && wget -q http://archive.apache.org/dist/ofbiz/apache-ofbiz-${VERSION}.zip \
    && unzip apache-ofbiz-${VERSION}.zip \
    && mv apache-ofbiz-${VERSION} apache-ofbiz \
    && rm -rf /usr/src/apache-ofbiz-${VERSION}.zip

RUN set -ex \
    && cd /usr/src/apache-ofbiz \
    && ./gradle/init-gradle-wrapper.sh \
    && ./gradlew loadAll
    # && ./gradlew "ofbiz --load-data readers=seed,seed-initial,ext"

WORKDIR /usr/src/apache-ofbiz
EXPOSE 8443
CMD [ "java", "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005", "-jar", "./build/libs/ofbiz.jar" ]

```

然后 idea 配置 remote debug 即可

![](https://mmbiz.qpic.cn/sz_mmbiz_png/e9icbmGX0KNLTnXTWKicvKFp0aib2O3vajX9xvSMvTuicj0W2I9GzYHpCfO3s3AuumcRU2ibFOUXbNHeiaCs0eM96OFA/640?wx_fmt=png&from=appmsg)