<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/PBI_2EsbiQOVzgD4ALzUmg)

**免责声明：**由于传播、利用本公众号李白你好所提供的信息而造成的任何直接或者间接的后果及损失，均由使用者本人负责，公众号李白你好及作者不为此承担任何责任，一旦造成后果请自行承担！如有侵权烦请告知，我们会立即删除并致歉。谢谢！

**1**►

**工具介绍**

An aggressor script that can help automate payload building in Cobalt Strike.

一个生成. exe 即可免杀的 Cobalt Strike 插件.

**环境要求**

Visual Studio 2022 with .NET Framework 4.8

**2**►

**工具用法**

侵略者只会在预定的路径中工作，即 ，当添加新的侵略者脚本时，一个新的菜单按钮将添加到 Cobalt Strikes 菜单栏中 C:\Tools\cobaltstrike\aggressors\PG

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUAvubrQTyV6t8xL94EnfXicKRPEVgvpia1IjVnmhRK8rhqb82yoLbWeKUuGfJQffvhtCB1giaYFPVfWg/640?wx_fmt=png&from=appmsg)

侵略者脚本基本上会自动创建有效负载，在此示例中，将编译带有 CreateThread API 的 C# 二进制文件

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUAvubrQTyV6t8xL94EnfXicKmzHAkGhFnIt7XibFYY25HLJn5SpzIDia8wQIrQrvvJgNXkfFdknUkbaA/640?wx_fmt=png&from=appmsg)

为了构建有效负载，预定值已添加到菜单选项中，因为此 API 仅适用于 x86 二进制文件，并且程序集类型为 winexe 以避免控制台弹出窗口

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUAvubrQTyV6t8xL94EnfXicKqJYKXmONBUDITib7F6ickrjsM0xKt9WtZpT58ubaz5E9RmvJqvp9ezng/640?wx_fmt=png&from=appmsg)

通过编辑 PG.cna 文件并将新脚本放在文件夹中，您可以在下面看到有一个注释突出显示如何添加新菜单，可以轻松添加更多模板 / scripts/

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUAvubrQTyV6t8xL94EnfXicKbHKQ8rd7b7Zk053SPwQjRc2lcgqFibP89Shmvc8QXbAz5ibnuic86Nqvg/640?wx_fmt=png&from=appmsg)

如下图所示，我们看到它需要 C# 项目文件来创建这些二进制文件，因为它是通过使用 MSBUILD 编译来自动化的，我尝试使用 Linux 添加它但没有成功，您可以自由更改它并添加更多功能，但这些默认功能对我有用。

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUAvubrQTyV6t8xL94EnfXicKJhquCOhhGf4VFBPelX7CBlPCmqkwqsv4ibuHV8vlssn386aQRFsBMOA/640?wx_fmt=png&from=appmsg)

此示例有效负载将由 AV 检测到。我建议将此路径添加到排除项或使用 COMMANDO VM 等操作系统以避免任何问题。它在我的 Windows 11 家庭工作站上运行，在此路径上排除了所有问题。添加了一些小功能，例如随机变量命名，但其他功能已被硬编码，因为这旨在成为 POC 侵略者。我建议查看参考资料，以更深入地了解建筑物并添加更多有效载荷。

**3**►

**Dome**

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUAvubrQTyV6t8xL94EnfXicK1LzMXn7icVGHPprMnY4KVF3mibAEVpBjpNFMNTm9vFv7Qj97QkPYHGMg/640?wx_fmt=png&from=appmsg)

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUAvubrQTyV6t8xL94EnfXicKy24n4s4U8nZQjLNnqxhdqQGictq2YH2h0FlIOoKPugKjyib30yy0w7cw/640?wx_fmt=png&from=appmsg)

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUAvubrQTyV6t8xL94EnfXicK1wO1Ah8pyJKG9rNHZQBu6cPiaZ862swbepfiagP224RySGUuZAfH2fCQ/640?wx_fmt=png&from=appmsg)

**4**►

**工具下载**

**点击关注下方名片****进入公众号**

**回复关键字【240117****】获取****下载链接**

**5**►

**往期精彩**

[

![](https://mmbiz.qpic.cn/mmbiz_jpg/XoIcX2HtlUBHiaEokb8slUZHkACgrW9fRXwicicOreLhSv8dOZUAGm6EdibSDUev2IC6HbJgDl9wgScmfnAopoDETw/640?wx_fmt=jpeg)

对某大学进行授权红队评估







](http://mp.weixin.qq.com/s?__biz=MzkwMzMwODg2Mw==&mid=2247503114&idx=1&sn=9c2b79c288610268e440e564731b8d66&chksm=c09abe5af7ed374ca65646159ba0dae1b33dc76c8f8f33d64282281a73f7c44a504fbf7f919b&scene=21#wechat_redirect)

[

![](https://mmbiz.qpic.cn/mmbiz_jpg/XoIcX2HtlUCbtoP0GeZeypibW5rDaUjFIvGPWQcXW9N4DWMFkv2lCKicKzNYD9u3a1USLQqRbeRyoD0bXjessPbQ/640?wx_fmt=jpeg)

某教学视频应用云平台入门. net 代码审计







](http://mp.weixin.qq.com/s?__biz=MzkwMzMwODg2Mw==&mid=2247503080&idx=1&sn=2e653e83f395c4a75017d1b858465986&chksm=c09abfb8f7ed36ae4a7ec665848b369f64450286e07080e224187774cacb39499857d24703f0&scene=21#wechat_redirect)

[

![](https://mmbiz.qpic.cn/mmbiz_jpg/XoIcX2HtlUDUJKBdhvWZl8oaQR4micTrZyRfficC4hu98cc0PWqCDqE4bOoKk1X5rfBZ7V2AOtmnD6XtKAQGLmGA/640?wx_fmt=jpeg)

一款可以换 icon 并且免杀的 Cobalt Strike 插件







](http://mp.weixin.qq.com/s?__biz=MzkwMzMwODg2Mw==&mid=2247503047&idx=1&sn=116a6b268ca529b64f2f37fe7ce32e61&chksm=c09abf97f7ed3681850bf119623643ac6cb976f2af74c1a80223f350eaa91aa3a5f09ad60e51&scene=21#wechat_redirect)

![](https://mmbiz.qpic.cn/mmbiz_gif/0VlSQrG5VxaFSrqyULYn7RsCv3gdVCDeTDAKgRQSqoKjPWuicu16jU803JO0NMdHqUfpbTWJwVXAibCymA6ROYlA/640?wxfrom=5&wx_fmt=gif&wx_lazy=1)

![](https://mmbiz.qpic.cn/mmbiz_gif/0VlSQrG5VxaFSrqyULYn7RsCv3gdVCDeTDAKgRQSqoKjPWuicu16jU803JO0NMdHqUfpbTWJwVXAibCymA6ROYlA/640?wxfrom=5&wx_fmt=gif&wx_lazy=1)

![](https://mmbiz.qpic.cn/mmbiz_gif/0VlSQrG5VxaFSrqyULYn7RsCv3gdVCDeTDAKgRQSqoKjPWuicu16jU803JO0NMdHqUfpbTWJwVXAibCymA6ROYlA/640?wxfrom=5&wx_fmt=gif&wx_lazy=1)

![](https://mmbiz.qpic.cn/mmbiz_gif/0VlSQrG5VxaFSrqyULYn7RsCv3gdVCDeTDAKgRQSqoKjPWuicu16jU803JO0NMdHqUfpbTWJwVXAibCymA6ROYlA/640?wxfrom=5&wx_fmt=gif&wx_lazy=1)