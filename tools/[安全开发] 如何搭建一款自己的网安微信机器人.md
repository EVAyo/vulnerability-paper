<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/R3XK2j0utg05-G68DMGk3g)

前言
--

hxd 写的一个微信网安机器人。

![](https://mmbiz.qpic.cn/mmbiz_png/H7ec9FOh7vrCHH9gtIcRFqDXUESWz1HJJ1Jdwqj0AtGn3b5KIsf4L6YSyS4htBCiaenLvYS1Tb2eToibqQtQ1D9Q/640?wx_fmt=png&from=appmsg)

原理
--

基于 HOOK 的微信机器人，以往的机器人大多数为协议机器人，封号概率极大（下面会详细讲解 hook 和协议的区别），而 HOOK 机制的大大减小了封号几率。  

什么是协议机器人？

与名称一样，通过破解通信协议内容，自行进行组合收包、发包等一系列操作。  

讲 HOOK 机制前，先大致知道微信发消息是怎么发出去的，本机输入内容 -> 交给微信类似于发消息的接口 -> 通信 -> 微信服务器。

而 HOOK 机制的机器人，中文翻译：钩，大致意思，就是通过 dll 注入等手段，大概就是，微信启动时，这里作为他加载的 dll，一样跟着启动，然后开始安装 hook，也就是安装我们口中的 “拦截器” 了，相当于直接调用修改过的微信接口，达到风控率低的手段。

HOOK 机器人 vs 协议机器人

HOOK 优点：封号率低

HOOK 缺点：不能跨平台

协议优点：破解后可以跨平台  

协议缺点：需要长期更新，出现新的协议或者略做更改就必须即使破解，很被动。  

机器人亮点
-----

1.  安全新闻定时推送【FreeBuf，先知，安全客，奇安信攻防社区】
    
2.  备案查询
    
3.  归属地查询
    
4.  WhoIS 查询
    
5.  威胁情报查询
    

使用教程
----

首先安装指定版本的 WeChat

![](https://mmbiz.qpic.cn/mmbiz_png/H7ec9FOh7vrCHH9gtIcRFqDXUESWz1HJdrCgDLlqMFwQZZyApbTLhHX5m8tV8YGQicicrmVHXjERiaqYJwicSB8mIw/640?wx_fmt=png&from=appmsg)

然后拉个 python 环境过来  

```
https://python.org/

```

把程序下载下来，然后 pip 安装所需要的包

```
python -m pip install --upgrade pip  # 更新pip
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple  # 将默认pip源设定为清华源（国内加速）
pip install -r requirements.txt  # 安装requirements.txt里面的模块

```

![](https://mmbiz.qpic.cn/mmbiz_png/H7ec9FOh7vrCHH9gtIcRFqDXUESWz1HJzzhZeKkZNiaovIhocU3lvjmX23wicOvgictdbYoetqrHwv1wERCcoibCAw/640?wx_fmt=png&from=appmsg)

![](https://mmbiz.qpic.cn/mmbiz_png/H7ec9FOh7vrCHH9gtIcRFqDXUESWz1HJiaKyaPskwfjnMzIr2y5qsB5icldO212BhCvLrb6MIMuIPHCClFnz7UIA/640?wx_fmt=png&from=appmsg)

然后运行 main.py  

```
python main.py

```

![](https://mmbiz.qpic.cn/mmbiz_png/H7ec9FOh7vrCHH9gtIcRFqDXUESWz1HJ856rGIkLqDibGX4wAfhooNibA8ZrZtr4EDXWT8B1VxPapFbSds9oqDibA/640?wx_fmt=png&from=appmsg)

启动后扫码登录，随便给机器人发个消息，终端会输出 wxid  

![](https://mmbiz.qpic.cn/mmbiz_png/H7ec9FOh7vrCHH9gtIcRFqDXUESWz1HJWN47ecRuKvN38LPibfb3X2StukKzmgevzsD75JPLQiaBBXGEsLp9iaRcw/640?wx_fmt=png&from=appmsg)

复制此 id

然后到 Config/config.yaml 文件里面修改管理员为自己的 wxid  

![](https://mmbiz.qpic.cn/mmbiz_png/H7ec9FOh7vrCHH9gtIcRFqDXUESWz1HJlhA4sRCaiaNaiajHylS3Hgr61OREtic0oMjtmJhv4ibqMFKuHWQsSdicaicg/640?wx_fmt=png&from=appmsg)

然后回到 cmd 窗口内，Ctrl+C 停掉，重启该软件。

重新登陆后，在机器人在的群里，发送 help 即可获取帮助。

![](https://mmbiz.qpic.cn/mmbiz_png/H7ec9FOh7vrCHH9gtIcRFqDXUESWz1HJuN1kUgFKpEmb74PvtJcQeh6GxA8zyM0ib33X9xbHYHoO0A7RepnrmVg/640?wx_fmt=png&from=appmsg)

文末
--

Github 地址：

```
https://github.com/ngc660sec/NGCBot

```