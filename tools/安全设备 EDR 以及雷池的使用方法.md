<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/gC_cy679pm85xSNaZXASaQ)

扫码领资料

获网安教程

免费 & 进群

![](https://mmbiz.qpic.cn/mmbiz_png/CBJYPapLzSFJNibV2baHRo8G34MZhFD1sjTz4LHLiaKG9208VTU6pdTIEpC9jlW6UVfhIb9rHorCvvMsdiaya4T6Q/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

![](https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaaJcib7FH02wTKvoHALAMw4fchVnBLMw4kTQ7B9oUy0RGfiacu34QEZgDpfia0sVmWrHcDZCV1Na5wDQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

  

一、安全设备 EDR 以及雷池的使用方法
====================

EDR
---

### （1）EDR 是什么，为什么要学？

EDR（Endpoint Detection and response，端点检测与响应）是一种安全技术，它通过对端点设备进行监控、检测和响应，以保护计算机系统免受恶意攻击和数据泄露等威胁

1.  应对复杂的安全威胁：随着网络攻击的不断升级，传统的安全防御手段往往难以应对。EDR 可以通过自动化的方式发现、隔离、修复、补救、调查、分析和取证安全威胁等一系列工作，大大降低了发现和处置安全威胁的复杂度，能够辅助用户更加快速、智能地应对安全威胁。
    
2.  高效的安全防御：EDR 可以在威胁尚未造成危害之前检测和防御威胁，将安全措施从被动的威胁防御方法转换为积极的威胁防御，从而有效扭转端点安全防御长期处于被动局面，提高计算机系统的安全性。
    
3.  广泛的应用场景：EDR 可以应用于各种设备，如台式机、服务器、笔记本、移动设备、嵌入式设备、SCADA 系统甚至 IoT 设备等，使其在应用前景上具有广泛性。
    
4.  适应现代化的安全需求：随着云计算和人工智能技术的发展，EDR 能够借助这些先进技术进行更加高效和智能的检测和防御，以适应现代化的安全需求。  
    ###（1）EDR 与 XDR、MDR 的区别  
    XDR (Extended Detection and Response，扩展检测和响应) 是一项仍在兴起发展讯速的技术是一种端点威胁检测和响应的新方法。EDR 关注的是端点的数据，而 XDR 中的 “X” 代表”扩展”，它代表任何数据源，不仅是端点，还有网络、电子邮件、应用程序、云工作负载等等。。MDR(托管检测和响应服务)。MDR 可被理解为托管的 XDR  
    ###（2）EDR 的功能  
    1. 持续收集端点数据  
    2. 实时分析和威胁检测  
    3. 自动威胁响应  
    4. 溯源深度处置  
    5. 支持威胁搜寻和安全加固
    

openedr 使用详细步骤（端点：虚拟机 windows server 2016）
------------------------------------------

官网地址：https://www.openedr.com/  
OpenEDR 是一个源代码公开可获取的网络安全平台，在这个平台上，广大研究人员可以同时对产品和服务进行管理。OpenEDR 不仅具有完整的 EDR 功能，而且它也是世界上最复杂、最有效的 EDR 代码库之一，在社区的帮助下，它将变得更好。  
OpenEDR 是免费的，其源代码对公众开放。它的运行机制是：工具安装 OpenEDR 是一个单一的代理，可以直接安装在 Windows 节点上

### 1. 安装

A. 注册账号  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJj96l8s4A4VhfH2ujwNT3c216nEbu7UGicuicP1qOL54RgeNjicAe6KlYNA/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjsR48ISyPrztlAicFdoMGEa4EXibUichFRugV3Uc7nhVgHInOIibIzKJD6w/640?wx_fmt=png)

B. 输入 TOTP 动态口令 / Skip 跳过二次验证

TOTP 动态验证码

*   wx 搜索 “腾讯身份验证器” 小程序
    
*   苹果手机 iCloud 密码管理器
    
*   安卓手机谷歌密码管理器  
    
*   ![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJj2g84lV8AggWdF3nv5Ldx9ZxSqcLw6UcCwB3ryq9WI7Pia38dvYf7aDA/640?wx_fmt=png)
    

C. 打开 windows2016 虚拟机访问 Step1 给出的下载链接

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjmFf9a3ibYicsuFe6oXZc2t1eJds6yksQ3wx6Zud9uDADSic4ScVtYp3ew/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjpuypANnTia9kVB7iavpSOoVVpTjLic5NicgUMnlia7MZEIMWanSM60Ofjag/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjI0AgA6erZ5rPjMFx5UKTg0iant0DKsgJribODEkKHzJfKVdLsQNEavzQ/640?wx_fmt=png)

下载到虚拟机中并安装即可，然后再回到网页，可以看到资产的设备中已经有显示了，因为我这里在 win10 和 windows server 2016 都安装了所以显示两个（这是并没有 EDR 功能）

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjdibkHjNAjUXoSibv0ZpEabhf9tTa1LkOn0QxHVrt0Jl9g3wvkdWVQRAw/640?wx_fmt=png)

  
并且我们也可以单击机器查看详情里面有关于相关的配置系统信息

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjd93kBjVFNwZdJiaNESbclXpE7ZIDJFjvINCDPF6zqvrym6jPaU3R57A/640?wx_fmt=png)

  
为 windows server 2016 添加 EDR 功能  
默认的 EDR 客户端是不支持 Windows server 2016 的，需要到 Settings->Client Setting->Windows->Xcitium Client -EDR 中点击 Edit，选择版本为 2.4.04（建议用谷歌翻译一下）

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjOsiboqpD8v9bbkhPjACOPCJnoOUeiaJqwtLH1icR8at1yTlib0U7pplKQA/640?wx_fmt=png)

调整好后就可以安装 EDR 了

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjEuoLkStKIWVwUu6G5xhyEcyKnNGmzZHRwYZ2gJ6E7RnjjPFFbKAeicA/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjF7nBYdgjXoTgghq3N000cb9RAHVeOEkX8mA3O26KWiaeoUNs7y98R8Q/640?wx_fmt=png)

  
点击 install 后 win10 就会出现如下弹窗（这里我选择了 win10

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjleTibRqTmugAyeQglpYcwgSuV5nJpyolMkmxBmG7rNRPQlyeGgaB9CA/640?wx_fmt=png)

  
重启之后返回网页 EDR 的标识亮了说明安装成功了（在这里可能会安装失败，原因可能有：1. 网络问题（可能需要用 “科学上网”）2. 若是安装在 windows server 2016 一定要记得按上文改设置）

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjRkThqexopvhYVEWbt46NbuiaaGEKPWq91b7REP66VPYVX6y2kWa6icMQ/640?wx_fmt=png)

### 使用

1.Security->alerts 记录安全警告  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjqMaUmstrUGUgDVQ06ficYs2LdkyPbkgygA58PZIPZUPWV1wcDPrrwcw/640?wx_fmt=png)

  
2.Security->Investigate 记录所有活动（例 xx.exe 尝试对屏幕进行截图等等）

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjOV9j59PSwE67NNGIggacx98ZKbtJGDib2wCTwdyHGTxQiaiamaST3TFUg/640?wx_fmt=png)

  
3.Managed Security->Incidents 事件监测

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJj7I0t57uTPrCocib9bP9QcktnicMHaRcI8fEZiaeGaIZ2RYCfzmmGgwgdw/640?wx_fmt=png)

### 建议

openedr 的功能不止于我所例举的还有文件管理等等，若对英文不是很熟悉的话，建议用谷歌翻译之后再进行学习

长亭雷池（WAF）
---------

长亭雷池官网 https://waf-ce.chaitin.cn/  
长亭官方文档 https://waf-ce.chaitin.cn/docs/

操作系统：linux  
指令架构：x86-64  
软件依赖：Dococker 20.10.14 版本以上、Docker Compose 2.0.0 版本以上  
最小化环境：1 核 CPU/1GB 内存 / 5GB 磁盘

Tip：环境安装命令在官方文档里↑

### 它是怎么实现安全防护的

#### 1. 采用反向代理的技术

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjIKgTU3ic1gx149Fqe83NmUWBssZo4zdftxXbVaU8lUwSIcYibx7h6yYg/640?wx_fmt=png)

#### 2. 怎么理解反向代理

反向代理（Reverse Proxy）是一种以代理服务器的形式接受来自互联网的请求，然后将请求转发给内部服务器的技术。它是这样工作的：

1.  客户端发送请求到反向代理服务器。
    
2.  反向代理服务器接收请求后，将根据请求的内容判断向何处转交请求，并将获得的内容返回给客户端。这个过程就像这些内容原本就是反向代理服务器自己的一样。
    
3.  重要的是，反向代理服务器对客户端而言就像是原始服务器。即使原始服务器并不存在请求的内容，反向代理也可以从其他服务器上取得所需的内容并返回给客户端，客户端对此一无所知。  
    简单来讲：像我们平时打电话给客服询问情况时，他们会有一个固定的电话可以拨打，但是你在拨打之后你是无法知道到底会是谁会来接听你的电话，也就是说反向代理就相当于充当一个中间人，你想访问它保护的网站，你就得先经过它。  
    
    ![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjYNJOq7IZwrVhtwpSQofqliavmld0QdjZUMnVTCswaicZrP7kK1QSlLQg/640?wx_fmt=png)
    

### 安装（演示环境：kali）：

在 kali 命令行下以 root 用户执行以下命令进行安装  
**bash -c "$(curl -fsSLk https://waf-ce.chaitin.cn/release/latest/setup.sh)"**

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJju4Bkict8rQTt8riaXNfAJU82YmVBtrg3rsTq3eiag1LH5yoCFH5kXCdOg/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjwkKGmyvr8AGRSBHZyoHicclz6pM8r92LVjjcBPuTx2gBz55n7pbYcnQ/640?wx_fmt=png)

打开之后同样是一个 TOTP 验证（用上面的方法验证）

打开小程序扫二维码绑定一下之后把码输进去即可  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjAlw0JibLZV3dmh41wmLtX2TO8AX1oT9iaw7iakIjcT7XjPONMx20w4Yng/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjZ72PpmMIxOO20YCKBaibFuTA3yJnk2vC2ZTv1RDyZNj4vZRsA9XLrLA/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJje5icxMnoB2kHSyW8sfVerUdHeCgCfkZNFBsFA8vRhWV2Tul3VatiboiaQ/640?wx_fmt=png)

  
配置防御站点  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjvJFZYfhhDTbRSnpA7jUX13ItTibF81hrT94rvOIicUuN7QLmmSqgF6IA/640?wx_fmt=png)

  
像我这样配置 只要让用户访问 http://192.168.6.133:18888 (这是我 kali 机的 ip 噢 不是你搭建网站的 ip（192.168.1.60)  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjk6fdQ1HtBXRKXNtC9mVXt3O0iag99HqwMIcmDR5rZJp0CDzzoUVSOnw/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjCDSTLyjCyFDGvBic6VhdfVDcgnagzd1IcpFbZG7tPvsmxcgmPXXDMZw/640?wx_fmt=png)

功能介绍：
-----

### 1. 查看攻击事件

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjzEsamCtPyoDUhl63LrHibYicaQ7M5R5kCfXYwJOQQLRYPlQp5PdiaazLw/640?wx_fmt=png)

  
一开始是没有的，现在我们来尝试攻击，我搭的是一个靶场所以自带很多漏洞，刚好拿来测试

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjlFYR6nfJdESD7LTFofuoOpXJEDgRlibHWQAU8mtl7budicM0BVx78zSg/640?wx_fmt=png)

  
试试 sql 注入，立马有拦截  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjgyGbsZhfPTIfEOaLlj2Aj6l1uosFlpH1MdKykGcGchptmMmTicpkIkA/640?wx_fmt=png)

  
看看记录（出现了两条信息，因为我试了两次）！！！记得要先刷新页面才会出现噢，另外分析也需要时间所以有时候会比较慢  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjAUfFjibevxSBcmRPPS0Iic8JDQSGTK7UiaQSQVTKT2gsE5cl68SFiaqcBw/640?wx_fmt=png)

  
可以点开详情查看，你输入的命令以及你的 ip、时间都会被记录，并且属于什么注入也会检测出来

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjSIXZDNBJDkXzrlMk9Phj88h3uuHZmruPqt7Oia82bulac5Ab6uW1eLw/640?wx_fmt=png)

### 2. 防护站点详情

单机站点可查看目录

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJj6dOtYibQ6P6OOgxKno64HRjtiaqhjNZibpc419LBEdNXUOO1J4tzKPAlA/640?wx_fmt=png)

### 3. 防护配置

设置黑白名单  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjNibn8hVqaCq1S2tmuRvZrApuNjEjXyyOQOWLeIu0afGqzbiaqB9C2AqA/640?wx_fmt=png)

人机验证（登录后会弹出人机验证框）

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJj40ngdaw0qCtpEssjTDmhd72HJveV22wicLeleeG2RxoZoWq9ibXpHqpA/640?wx_fmt=png)

  
频率限制（防止爆破工具）  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjoiajiaPNn48Yfmy6zLvtx2r25WxFCsWWe8UEsJXINCSK8Uj29wHyGXibA/640?wx_fmt=png)

语义分析（管理分析漏洞类型）

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSE67bGXeBI36gtuHH9qoNJjXcyp3WnSrH1cE84KdcxByJA4Qe2o1KiaNBtMkvibxug6ZicfJqWjsm9icQ/640?wx_fmt=png)

### 总结

长亭雷池 WAF 的特点在于其强大的主动防御能力、高并发处理迅速、对业务零影响，以及基于语义分析的 WEB 攻击检测。  
首先，长亭雷池 WAF 的主动防御能力非常出色。它不仅基于对用户正常业务流量的不断迭代学习，能够建立 “千人千面” 的自动化防御策略，而且通过将多种深度学习算法应用在异常请求分析、用于识别非法流量并实时拦截。  
其次，长亭雷池 WAF 的高并发处理迅速，对业务零影响。它可采用集群嵌入式部署模式，在处理性能方面，实测长亭雷池单台检测节点在处理 20 万 QPS 高并发情况下，99% 的请求延迟小于 1ms，在防护攻击的同时对用户使用几乎零影响。  
此外，基于智能语义分析的算法，长亭雷池 WAF 能够从语言的角度实现分析检测，积累的大量样本数据，形成了精准的威胁检测模型。在 0day 爆发时，无需添加规则和打补丁即可防护未知威胁。这意味着长亭雷池 WAF 能够更好地解决误报、漏报，以及对未知威胁防御的问题。  
总的来说，长亭雷池 WAF 在主动防御能力、高并发处理和对业务零影响方面有显著优势，值得企业考虑使用。

```
来源：https://xz.aliyun.com/t/12905

```

声明：⽂中所涉及的技术、思路和⼯具仅供以安全为⽬的的学习交流使⽤，任何⼈不得将其⽤于⾮法⽤途以及盈利等⽬的，否则后果⾃⾏承担。**所有渗透都需获取授权**！  

@

**学习更多渗透技能！体验靶场实战练习**

```
（hack视频资料及工具）


```

（部分展示）

往期推荐

【精选】SRC 快速入门 + 上分小秘籍 + 实战指南

爬取免费代理，拥有自己的代理池

漏洞挖掘｜密码找回中的套路

渗透测试岗位面试题 (重点：渗透思路)

漏洞挖掘 | 通用型漏洞挖掘思路技巧

干货｜列了几种均能过安全狗的方法！

一名大学生的黑客成长史到入狱的自述

攻防演练｜红队手段之将蓝队逼到关站！

巧用 FOFA 挖到你的第一个漏洞

**看到这里了，点个 “赞”、“再看” 吧**