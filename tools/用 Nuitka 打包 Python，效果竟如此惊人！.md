<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/c-CiVbGF457pwaEP8oSFGQ)

使用 Python 开发一个程序后，将 Python 脚本打包成独立可执行文件是一项常见需求。

Nuitka 是一个 Python 到 C 的编译器，它会将 Python 代码转换为等效的 C 代码，然后使用标准的 C 编译器（如 GCC）将其编译为二进制可执行文件。这一过程不仅提高了程序的执行效率，还能通过编译后的二进制文件保护代码的隐私。

![](https://mmbiz.qpic.cn/mmbiz_png/8bQG11G0mzXRXjdzeDDqj5Zb9LkRa2l7utsKQbLPcsmwXZicEwuluuwhqwSJVyvW34hBY0hR9a1QkQeURicoHMFA/640?wx_fmt=png&from=appmsg)

为什么选择 Nuitka？
-------------

1.  1. **性能需求**：对于性能要求高的应用，Nuitka 提供了显著的优化。
    
2.  2. **部署方便**：将 Python 脚本打包成单个可执行文件，便于分发和部署。
    
3.  3. **代码保护**：编译后的文件不容易被逆向工程，有效保护了代码的知识产权。
    

Nuitka 的工作原理
------------

### Nuitka 的工作流程大致如下：

1.  1. **Python 解析**：Nuitka 首先解析 Python 代码，生成抽象语法树（AST）。
    
2.  2. **C++ 转换**：然后将 AST 转换为对应的 C++ 代码。
    
3.  3. **编译链接**：最后，通过 C++ 编译器（如 GCC 或 Clang）编译生成可执行文件。
    

这种转换不仅保留了 Python 的动态特性，还通过优化提高了程序的运行效率。

### 安装 Nuitka

在安装 Nuitka 之前，确保你的环境中已经安装了 Python 和 C 编译器（如 GCC）。然后可以使用 pip 安装 Nuitka：

```
pip install nuitka

```

实战案例
----

接下来，我们通过一个简单的例子，演示如何使用 Nuitka 打包 Python 程序。

### 示例代码

假设我们有一个简单的 Python 脚本 `hello.py`，内容如下：

```
# hello.py
def greet(name):
    print(f"Hello, {name}!")

if __name__ == "__main__":
    greet("World")

```

### 打包程序

安装完成后，我们可以使用 Nuitka 来编译 `hello.py`：

```
nuitka --windows-disable-console hello.py #--windows-disable-console 去掉控制台

```

在这条命令中：

*   • `--standalone`：表示生成独立的可执行文件，包含所有依赖。
    
*   • `--mingw64`：指定使用 MinGW64 作为 C++ 编译器。
    

编译完成后，会在当前目录下生成一个可执行文件和 `hello.dist` 文件夹，包含了所有必要的依赖文件。

![](https://mmbiz.qpic.cn/mmbiz_png/8bQG11G0mzXRXjdzeDDqj5Zb9LkRa2l7qSOEIA8ejJXjt25bbCiasXX78KS4wHFibmmO4yzh1Xaib4nhDDQl7ZumA/640?wx_fmt=png&from=appmsg)

### 运行可执行文件

进入生成的 `hello.dist` 目录，运行生成的可执行文件：

```
cd hello.dist
./hello.exe  # Windows系统下
./hello  # Linux系统下

```

你将看到输出：

```
Hello, World!

```

进阶技巧
----

### 优化选项

Nuitka 提供了多种优化选项，可以根据需要进行调整：

*   • `--lto=yes`：启用链接时优化（Link Time Optimization），进一步提高性能。
    
*   • `--remove-output`：编译完成后，自动删除中间文件。
    

例如：

```
nuitka --standalone --mingw64 --lto=yes --remove-output hello.py

```

### 多文件项目

对于多文件项目，可以直接指定入口文件，Nuitka 会自动处理所有依赖文件：

```
nuitka --standalone --mingw64 main.py

```

### 打包第三方库

Nuitka 可以处理大多数常见的第三方库，如 NumPy、Pandas 等。只需确保在运行环境中安装了这些库，Nuitka 会自动打包它们。

Nuitka 是一个功能强大的 Python-to-C++ 编译器，能够有效地将 Python 脚本转换为高效的可执行文件。

**如果分享你的信息，对你有用！别忘了三连击哦——点赞、收藏、关注！**

**喜欢学习 Pyhon 及副业知识，可添加微信 tongwen1629 围观学习！**