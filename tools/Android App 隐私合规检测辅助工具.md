<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/SBmE0c479hBXL-1EojmCjw)

**项目简介**

现如今 APP 隐私合规十分重要，各监管部门不断开展 APP 专项治理工作及核查通报，不合规的 APP 通知整改或直接下架。camille 可以 hook 住 Android 敏感接口，检测是否第三方 SDK 调用。根据隐私合规的场景，辅助检查是否符合隐私合规标准。

**工具安装**

**环境：**  

python3、frida 、一台已 root 手机 (我测试机为 Redmi 3s，刷机成魔趣 Android 8.1，感觉问题挺多的)，并在手机上运行 frida-server。

测试了 Android 8.1(还测试了魔趣 Android 10)，其他版本安卓可能会有 bug。

**下载：**

```
git clone https://github.com/zhengjim/camille.git
cd camille
pip install -r requirements.txt
python camille.py -h

```

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/LYy9xnADcdhCe1VGw6M6aw4r946KOvyKHwxacQerFouIk4cOWa3SlqOicGDjG1ZCHAk1OZX63deLX9K6IV2eUOQ/640?wx_fmt=jpeg)

**工具使用**

**简单使用**

com.zhengjim.myapplication 为测试 app 的包名，会显示时间、行为和调用堆栈。可以根据场景来判断是否合规，如：获取敏感信息是否是在同意隐私政策之前等。  

```
python camille.py com.zhengjim.myapplication

```

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/LYy9xnADcdhCe1VGw6M6aw4r946KOvyKFGVWDKxZibTGcCpPKG2twUDibPuuq9pGh49mcV57SJibdGQWwXJv4gMcw/640?wx_fmt=jpeg)

**输出堆栈信息文件**
============

-ns：不显示日志，默认显示；-f：保存 app 行为轨迹 (堆栈信息) 到 execl 里，默认不保存。

```
python camille.py com.zhengjim.myapplication -ns -f demo01.xls

```

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/LYy9xnADcdhCe1VGw6M6aw4r946KOvyK9MQsjvLlblG9wzWDjH4JPHlWyfsk61ywWEjsJIo4zgS5skDmfhmib0A/640?wx_fmt=jpeg)

**延迟 hook**
===========

-t：hook 应用自己的函数或含壳时，建议使用 setTimeout 并给出适当的延时 (1-5s，需要根据不同 app 进行调整)。以免 hook 失败。默认不延迟。

```
python camille.py com.zhengjim.myapplication -t 3

```

如下图：不加延迟 hook 失败。

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/LYy9xnADcdhCe1VGw6M6aw4r946KOvyK1oiavh3LQumaRdjicfQWLmyMw4p77O47zwPIA2A5Tr5ml2orMTDozxKA/640?wx_fmt=jpeg)

加了延迟 hook 成功。

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/LYy9xnADcdhCe1VGw6M6aw4r946KOvyKvqeiaancN6Peb1xFaibaKhbwWLABaX4iaBL0IRqfLVc67X5sKiaEtJ8xrQ/640?wx_fmt=jpeg)

下载连接

公众号后台回复 “**240109**”
--------------------

**推荐↓↓↓**