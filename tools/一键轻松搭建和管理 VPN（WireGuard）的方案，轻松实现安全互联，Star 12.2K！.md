<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/8dMPswxRkHqZce1IgrHAuA)

** 点击上方蓝字 关注我 **

随着云计算、物联网（IoT）和远程办公等技术的发展，VPN 的重要性更加凸显，并且现有的网络带宽质量也越来越好，很多企业和用户都选择了 VPN 解决方案来实现多地的互联（相对传统的专线，经济实惠），很多企业和用户选择建设 VPN 主要用于以下几个场景：

*   **云计算业务的发展：**虽然现在 “上云” 和“下云” 的争议仍然不休，并且很多大企业确实在 “下云”，但是对中小企业和个人来说，前期业务部署云上确实具备较高的性价比。而 VPN 也是在上云过程中必不可少的建设项目之一。
    
*   **物联网（IoT）：**随着互联网的智能设备数量不断增加，边缘计算的发展，特别是对于家庭自动化系统、智能城市设施和工业控制系统等关键基础设施，VPN 可以提供重要的安全保障和便捷的网络连接。
    
*   **远程办公：**远程工作越来越普遍，VPN 可以确保远程员工能够安全地访问公司网络和资源，此外，VPN + 堡垒机还可以帮助企业管理远程访问权限，确保只有授权人员可以访问敏感信息。
    

综上所述，VPN 就像水和空气，虽然很常见，但是很重要的一环。所以很多企业在建设网络时，VPN 是必不可少的一项。常见的 VPN 有 IPSec 和 OpenVPN，在介绍之前，我们有必要了解下这三种 VPN 的对比：

<table interlaced="enabled"><thead><tr><td><strong>特点</strong></td><td><strong>WireGuard</strong></td><td><strong>IPSec</strong></td><td><strong>OpenVPN</strong></td></tr></thead><tbody><tr><td><p><strong>优点</strong></p></td><td><p>简单性、高性能、安全性强</p></td><td><p>成熟、广泛支持、灵活性好</p></td><td><p>成熟稳定、跨平台、广泛支持</p></td></tr><tr><td><p><strong>缺点</strong></p></td><td><p>相对较新、生态系统仍在发展</p></td><td><p>配置复杂、性能较低</p></td><td><p>较高的延迟、复杂性高</p></td></tr><tr><td><p><strong>安全性</strong></p></td><td><p>现代密码学、简单设计</p></td><td><p>强大的加密和认证机制</p></td><td><p>强大的加密和认证机制</p></td></tr><tr><td><p><strong>性能</strong></p></td><td><p>高性能、低延迟</p></td><td><p>由于复杂性可能导致性能下降</p></td><td><p>中等性能、较高的延迟</p></td></tr><tr><td><p><strong>配置和部署</strong></p></td><td><p>简单、易于配置和部署</p></td><td><p>配置复杂、需要专业知识</p></td><td><p>配置较复杂、但可通过图形界面简化</p></td></tr><tr><td><p><strong>社区支持</strong></p></td><td><p>得到广泛社区支持和积极发展</p></td><td><p>成熟稳定、有大量的文档和支持社区</p></td><td><p>成熟稳定、有大量的文档和支持社区</p></td></tr><tr><td><p><strong>适用场景</strong></p></td><td><p>适用于对性能和简洁性要求较高的场景</p></td><td><p>适用于企业级网络和专业用户</p></td><td><p>适用于各种网络环境和使用情况</p></td></tr></tbody></table>

而我们今天主要介绍的是 WireGuard 的部署和管理工具：wg-easy

**01** 

**—** 

 wg-easy 介绍 
============

**一段话介绍 wg-easy：**一个专为简化 WireGuard VPN 配置和管理而设计的工具，提供了界面化的管理，进一步降低了 WireGuard 的使用门槛，让用户无需深入了解其底层工作原理即可轻松部署和管理 WireGuard VPN。
============================================================================================================================

![](https://mmbiz.qpic.cn/mmbiz_png/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtLXhPH5axiaP6PDyQzrKL4U9DCcFKRSHyGfo6tx5mHomL8J0DKlL0qcNA/640?wx_fmt=png&from=appmsg)

**🏠  项目信息**

```
# wg-easy github地址
https://github.com/wg-easy/wg-easy
# WireGuard 项目地址
https://github.com/WireGuard
# WireGuard 项目官网
https://www.wireguard.com/

```

![](https://mmbiz.qpic.cn/mmbiz_png/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtLaLKUT123UTBdG3Rj1SltPkicRLkB33l8volSQJ8hE6cX7HXGCTpAlkw/640?wx_fmt=png&from=appmsg)

🚀**功能特性**
----------

*   **自动化配置：**wg-easy 的核心特性在于其自动化配置 WireGuard 过程，使得用户无需深入了解 WireGuard 的底层工作原理就能进行设置。
    
*   **一体化能力：**wg-easy 不仅提供 WireGuard 的配置和管理功能，还集成了 Web UI，使得用户可以通过网页界面方便地列出、创建、编辑、删除、启用和禁用客户端，以及查看连接的客户端的统计信息和 Tx/Rx 图表。
    
*   **灵活的扩展性：**虽然 wg-easy 本身已经提供了丰富的功能，但其模块化设计也允许用户根据需要自定义功能，或者通过插件系统扩展其功能。
    

**02**

**—**  

 wg-easy 安装 
============

wg-easy 提供 Docker 安装，需要先安装 Docker 环境。本次环境采用了一台腾讯云主机（OpenCloudOS 9 操作系统，2C2G,20G 磁盘，带公网 IP），配置如下：

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtLWVr6BKqd89dmhQibB8sE5XOtgsDVOKEI5RxeicoZlaVIowgLVrJIBK1Q/640?wx_fmt=jpeg&from=appmsg)

**快速安装 Docker：**

```
sudo yum makecache
sudo yum install docker -y
sudo systemctl start docker
sudo systemctl enable docker

```

**快速安装 wg-easy:**  

```
  docker run -d \
  --name=wg-easy \
  -e LANG=de \
  -e WG_DEFAULT_DNS=114.114.114.114 \
  -e WG_HOST=xxx.xxx.xxxx225 \ #此处需要改成公网IP
  -e PASSWORD=xxxxxxxx \ #此处设置登录界面密码
  -e PORT=51821 \
  -e WG_PORT=51820 \
  -v ~/.wg-easy:/etc/wireguard \
  -p 51820:51820/udp \
  -p 51821:51821/tcp \
  --cap-add=NET_ADMIN \
  --cap-add=SYS_MODULE \
  --sysctl="net.ipv4.conf.all.src_valid_mark=1" \
  --sysctl="net.ipv4.ip_forward=1" \
  --restart unless-stopped \
  ghcr.io/wg-easy/wg-easy

```

**部署如果出现以下错误，说明部署的主机内核版本偏低，需要升级内核（如采用本文的操作系统则不会遇到此问题）：**

```
This usually means that your host's kernel does not support WireGuard!

```

部署完成后，访问 _http://hotsIP:51821_ 访问界面：

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtLMXCjvLMRFiacHgu87mu2Rj2cibbtA3fiaBUxc0sTkAU4cCPIGf7TYoBQQ/640?wx_fmt=jpeg&from=appmsg)

**03**

**—**  

 wg-easy 使用 
============

本次部署的网络示意图如下：

![图片](https://mmbiz.qpic.cn/mmbiz_png/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtLh7joAdOIibcjJdHIWGOyV9q5Z2fpZHZlibz1fTmQDdhzLreVibcqH8icBQ/640?wx_fmt=png&from=appmsg)

其中组网 IP 是部署 wg-easy 后，所有设备获取的 WireGuard 分配的虚拟网络 IP 地址。通过这个地址实现所有设备的点对点互通。

*   **客户端下载：**
    

访问以下地址，按照不同操作系统类型下载和安装客户端安装包下载：  

```
https://www.wireguard.com/install/

```

![图片](https://mmbiz.qpic.cn/mmbiz_png/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtLKIG3uOGA5KrWSHaRcoJ6Z4TkUumZpMlslroA723XguW95aesMiaib4EA/640?wx_fmt=png&from=appmsg)

*   **服务器创建客户端：**
    

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtLHXliaEzCRgWFxJibicezMgUnvMdiaicTZ0LlLtx32T6AvhI8RbqgBM88kHQ/640?wx_fmt=jpeg&from=appmsg)

*   **Windows 客户端配置：**
    

在服务端下载配置文件后，客户端中导入：

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtL4icN6JaKoVeIPwhhdGNUHhia0uetVx1PUnvcZahclPeOiaRCFzx1FKY4g/640?wx_fmt=jpeg&from=appmsg)

*   **Linux 客户端配置：**
    

Linux 安装完成后，在 / etc/wireguard 目录中创建 wg0.conf 配置文件，配置的信息同客户端中下载的配置文件一致即可

*   **手机客户端配置：**
    

手机端配置比较简单，手机安装好客户端 APP 后，直接扫码即可。

*   **效果测试：**
    

咋任意的一台客户端机器上 ping 网络，发现已经可以访问了：

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtLztHOB2JaLibKupRdhh2M87icDyda2IqY1PWNE8VVqxKVgBZhS7S7hUZg/640?wx_fmt=jpeg&from=appmsg)

直接远程也可以使用：

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtLuWThLMXdCp62TIfvrjZI461zu0PY0tM63FWPQCHhz24R3Zj4MNeLng/640?wx_fmt=jpeg&from=appmsg)

并且在服务端也可以查看到连接的网络流量信息：

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/kgXibFxsv0e1zIXML5mFvZlN9ibMFZkRtLrppg3wFNz6AdDElc6vTEBgk1bTZicZx4nFL2qEy5bv3pggialNqOYyAQ/640?wx_fmt=jpeg&from=appmsg)

**04**

**—**  

 最后 
====

总的来说，wg-easy 提供了一个简单、快速且安全的方式来配置和管理 WireGuard VPN 连接，使得用户能够更轻松地享受到 VPN 带来的安全和隐私保护。无论现在采用的是 IPSec 或者 OpenVPN，还是已经用上了 WireGuard VPN，如果你也觉得现有的 VPN 配置管理比较麻烦的话，不妨试试 wg-easy 吧。

* * *

**往期文章推荐：**

*   [一个提升工作效率的工具集，微软官方出品，你值得拥有，Star 10.6K+!](http://mp.weixin.qq.com/s?__biz=MzkzMTY1NTAzMA==&mid=2247485133&idx=1&sn=0eb36c11cee5088a630aebc23ae49966&chksm=c266fad4f51173c2c7591d772887502aa9834f0dbf7eb9bfeab5cdbccd338037a5a28eaa9ea4&scene=21#wechat_redirect)
    
*   [一个简单的 OCR 识别引擎，但是很强大，支持 80 + 的语言，Star 22.3K+!（本文附带一个简单的开发教程 DEMO）](http://mp.weixin.qq.com/s?__biz=MzkzMTY1NTAzMA==&mid=2247484942&idx=1&sn=e8d85a53418c8b612e4d56b4a0cb441b&chksm=c266fa17f5117301a897b4e8417eabd724104d1aac3598dcd3af608dd3c51eec7a05826eb6ce&scene=21#wechat_redirect)
    
*   [一个数据处理工作流系统，分布式、易扩展、可视化，Star 12.2K+！](http://mp.weixin.qq.com/s?__biz=MzkzMTY1NTAzMA==&mid=2247484923&idx=1&sn=c635b36fe72a78f1d63d652ec933db50&chksm=c266f9e2f51170f4f8b2d34bfa5fbdb6a596a9f419e89289dd36dffa22e4ad07980e75bc59e6&scene=21#wechat_redirect)
    
*   [一个一键即可生成 SSL 证书的工具，零配置，从此告别繁琐，Star 46K+！](http://mp.weixin.qq.com/s?__biz=MzkzMTY1NTAzMA==&mid=2247484886&idx=1&sn=f0016a9a8f5a7614b34e91ef0ee73b7b&chksm=c266f9cff51170d9af9a0abf16cf8e4750130776781b320f2cb7d3a981f1c242cf72c08ecea7&scene=21#wechat_redirect)
    
*   [一个文件在线预览解决方案，丰富、灵活，可支持第三方快速集成接入，Star 10K!](http://mp.weixin.qq.com/s?__biz=MzkzMTY1NTAzMA==&mid=2247484962&idx=1&sn=774d0cc9c9dc5ecf0a5cd58b3c7b2d0d&chksm=c266fa3bf511732dc9aa4bb3d956d7b0fce7ea020fa73a6b5f01ef7bf1189c5f687949f61bf9&scene=21#wechat_redirect)