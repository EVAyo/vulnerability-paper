> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/2qlT_98Zf3AWmCAcv2oZJA)

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/HV2vGRIb33HYkjtmwNLxzIuk7HZ7LozxQsJvXvxZJ47jh2mJp9bfiaWZhE3xa2XV5vY0Gw1J29vxyLeXlN0pcMg/640?wx_fmt=gif&from=appmsg)

**1. 文件和目录操作**

创建目录：

```
import os
os.makedirs('new_directory', exist_ok=True)

```

删除目录：

```
import shutil
shutil.rmtree('directory_to_delete')

```

列出目录内容：

```
import os
for item in os.listdir('path/to/directory'):
    print(item)

```

复制文件：

```
import shutil
shutil.copy('source_file.txt', 'destination_file.txt')

```

移动文件：

```
import shutil
shutil.move('source_file.txt', 'destination_directory/')

```

重命名文件：

```
import os
os.rename('old_name.txt', 'new_name.txt')

```

读取文件内容：

```
with open('file.txt', 'r') as f:
    content = f.read()
    print(content)

```

写入文件内容：

```
with open('file.txt', 'w') as f:
    f.write('Hello, World!')

```

追加文件内容：

```
with open('file.txt', 'a') as f:
    f.write('\nAppending new line.')

```

检查文件是否存在：

```
import os
if os.path.exists('file.txt'):
    print('File exists.')

```

获取文件大小：

```
import os
file_size = os.path.getsize('file.txt')
print(f'File size: {file_size} bytes')

```

获取文件修改时间：

```
import os
mod_time = os.path.getmtime('file.txt')
print(f'Modified time: {mod_time}')

```

递归遍历目录：

```
import os
for root, dirs, files in os.walk('path/to/directory'):
    for name in files:
        print(os.path.join(root, name))

```

查找文件：

```
import os
for root, dirs, files in os.walk('path/to/directory'):
    if 'target_file.txt' in files:
        print(os.path.join(root, 'target_file.txt'))

```

压缩文件：

```
import zipfile
with zipfile.ZipFile('archive.zip', 'w') as zipf:
    zipf.write('file.txt')

```

解压缩文件：

```
import zipfile
with zipfile.ZipFile('archive.zip', 'r') as zipf:
    zipf.extractall('extracted_directory')

```

读取 CSV 文件：

```
import csv
with open('data.csv', 'r') as csvfile:
    reader = csv.reader(csvfile)
    for row in reader:
        print(row)

```

写入 CSV 文件：

```
import csv
with open('data.csv', 'w', newline='') as csvfile:
    writer = csv.writer(csvfile)
    writer.writerow(['Name', 'Age'])
    writer.writerow(['Alice', 30])
    writer.writerow(['Bob', 25])

```

读取 JSON 文件：

```
import json
with open('data.json', 'r') as f:
    data = json.load(f)
    print(data)

```

写入 JSON 文件：

```
import json
data = {'name': 'Alice', 'age': 30}
with open('data.json', 'w') as f:
    json.dump(data, f)

```

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/HV2vGRIb33HYkjtmwNLxzIuk7HZ7LozxQsJvXvxZJ47jh2mJp9bfiaWZhE3xa2XV5vY0Gw1J29vxyLeXlN0pcMg/640?wx_fmt=gif&from=appmsg)

**2. 网络请求**

发送 GET 请求：

```
import requests
response = requests.get('https://api.example.com/data')
print(response.text)

```

发送 POST 请求：

```
import requests
payload = {'key': 'value'}
response = requests.post('https://api.example.com/submit', data=payload)
print(response.text)

```

发送带有头部的请求：

```
import requests
headers = {'Content-Type': 'application/json'}
response = requests.get('https://api.example.com/data', headers=headers)
print(response.text)

```

下载文件：

```
import requests
url = 'https://example.com/file.zip'
response = requests.get(url)
with open('downloaded_file.zip', 'wb') as f:
    f.write(response.content)

```

上传文件：

```
import requests
files = {'file': open('file.txt', 'rb')}
response = requests.post('https://api.example.com/upload', files=files)
print(response.text)

```

处理 JSON 响应：

```
import requests
response = requests.get('https://api.example.com/data')
data = response.json()
print(data)

```

处理 XML 响应：

```
import requests
import xml.etree.ElementTree as ET
response = requests.get('https://api.example.com/data.xml')
root = ET.fromstring(response.text)
for child in root:
    print(child.tag, child.attrib)

```

设置超时：

```
import requests
response = requests.get('https://api.example.com/data', timeout=5)
print(response.text)

```

处理 HTTP 错误：

```
import requests
try:
    response = requests.get('https://api.example.com/data')
    response.raise_for_status()
except requests.exceptions.HTTPError as errh:
    print("Http Error:", errh)
except requests.exceptions.ConnectionError as errc:
    print("Error Connecting:", errc)
except requests.exceptions.Timeout as errt:
    print("Timeout Error:", errt)
except requests.exceptions.RequestException as err:
    print("OOps: Something Else", err)

```

使用会话：

```
import requests
session = requests.Session()
session.auth = ('username', 'password')
response = session.get('https://api.example.com/data')
print(response.text)

```

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/HV2vGRIb33HYkjtmwNLxzIuk7HZ7LozxQsJvXvxZJ47jh2mJp9bfiaWZhE3xa2XV5vY0Gw1J29vxyLeXlN0pcMg/640?wx_fmt=gif&from=appmsg)

**3. 数据处理**

字符串分割：

```
text = "apple,banana,orange"
fruits = text.split(',')
print(fruits)

```

字符串连接：

```
fruits = ['apple', 'banana', 'orange']
text = ','.join(fruits)
print(text)

```

字符串替换：

```
text = "Hello, World!"
new_text = text.replace('World', 'Python')
print(new_text)

```

字符串格式化：

```
name = "Alice"
age = 30
message = f"Name: {name}, Age: {age}"
print(message)

```

列表排序：

```
numbers = [3, 1, 4, 1, 5, 9]
sorted_numbers = sorted(numbers)
print(sorted_numbers)

```

字典排序：

```
from collections import OrderedDict
data = {'b': 2, 'a': 1, 'c': 3}
ordered_data = OrderedDict(sorted(data.items()))
print(ordered_data)

```

过滤列表：

```
numbers = [3, 1, 4, 1, 5, 9]
even_numbers = [num for num in numbers if num % 2 == 0]
print(even_numbers)

```

统计词频：

```
from collections import Counter
text = "hello world hello"
word_counts = Counter(text.split())
print(word_counts)

```

生成随机数：

```
import random
random_number = random.randint(1, 100)
print(random_number)

```

生成随机字符串：

```
import random
import string
random_string = ''.join(random.choices(string.ascii_letters + string.digits, k=10))
print(random_string)

```

日期和时间处理：

```
from datetime import datetime
now = datetime.now()
formatted_now = now.strftime("%Y-%m-%d %H:%M:%S")
print(formatted_now)

```

解析日期字符串：

```
from datetime import datetime
date_string = "2023-10-05 15:30:00"
parsed_date = datetime.strptime(date_string, "%Y-%m-%d %H:%M:%S")
print(parsed_date)

```

计算两个日期之间的差值：

```
from datetime import datetime
date1 = datetime(2023, 10, 5)
date2 = datetime(2023, 10, 10)
delta = date2 - date1
print(delta.days)

```

生成日期范围：

```
from datetime import datetime, timedelta
start_date = datetime(2023, 10, 5)
end_date = datetime(2023, 10, 10)
date_range = [start_date + timedelta(days=x) for x in range((end_date - start_date).days + 1)]
for date in date_range:
    print(date.strftime("%Y-%m-%d"))

```

计算年龄：

```
from datetime import datetime
birthdate = datetime(1990, 1, 1)
today = datetime.today()
age = today.year - birthdate.year - ((today.month, today.day) < (birthdate.month, birthdate.day))
print(age)

```

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/HV2vGRIb33HYkjtmwNLxzIuk7HZ7LozxQsJvXvxZJ47jh2mJp9bfiaWZhE3xa2XV5vY0Gw1J29vxyLeXlN0pcMg/640?wx_fmt=gif&from=appmsg)

**4. 系统管理**

执行系统命令：

```
import subprocess
result = subprocess.run(['ls', '-l'], capture_output=True, text=True)
print(result.stdout)

```

获取当前工作目录：

```
import os
current_dir = os.getcwd()
print(current_dir)

```

更改当前工作目录：

```
import os
os.chdir('/path/to/new/directory')

```

获取环境变量：

```
import os
value = os.getenv('PATH')
print(value)

```

设置环境变量：

```
import os
os.environ['MY_VARIABLE'] = 'my_value'

```

获取系统信息：

```
import platform
system_info = platform.uname()
print(system_info)

```

获取 CPU 信息：

```
import psutil
cpu_percent = psutil.cpu_percent(interval=1)
print(cpu_percent)

```

获取内存信息：

```
import psutil
memory_info = psutil.virtual_memory()
print(memory_info)

```

获取磁盘使用情况：

```
import psutil
disk_usage = psutil.disk_usage('/')
print(disk_usage)

```

获取网络接口信息：

```
import psutil
net_if_addrs = psutil.net_if_addrs()
for interface, addrs in net_if_addrs.items():
    print(f"Interface: {interface}")
    for addr in addrs:
        print(f"  {addr.family.name}: {addr.address}")

```

获取进程列表：

```
import psutil
for proc in psutil.process_iter(['pid', 'name']):
    print(proc.info)

```

杀死进程：

```
import psutil
for proc in psutil.process_iter(['pid', 'name']):
    if proc.info['name'] == 'process_name':
        proc.kill()

```

获取用户信息：

```
import pwd
user_info = pwd.getpwnam('username')
print(user_info)

```

获取组信息：

```
import grp
group_info = grp.getgrnam('groupname')
print(group_info)

```

获取系统日志：

```
import logging
logging.basicConfig(filename='app.log', level=logging.INFO)
logging.info('This is an info message')

```

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/HV2vGRIb33HYkjtmwNLxzIuk7HZ7LozxQsJvXvxZJ47jh2mJp9bfiaWZhE3xa2XV5vY0Gw1J29vxyLeXlN0pcMg/640?wx_fmt=gif&from=appmsg)

**5. 文本处理**

读取大文件：

```
with open('large_file.txt', 'r') as f:
    for line in f:
        print(line.strip())

```

逐行写入大文件：

```
with open('large_file.txt', 'w') as f:
    for i in range(1000000):
        f.write(f'Line {i}\n')

```

查找并替换文本：

```
with open('file.txt', 'r') as f:
    content = f.read()
new_content = content.replace('old_text', 'new_text')
with open('file.txt', 'w') as f:
    f.write(new_content)

```

读取并处理 CSV 文件：

```
import csv
with open('data.csv', 'r') as csvfile:
    reader = csv.DictReader(csvfile)
    for row in reader:
        print(row['Name'], row['Age'])

```

写入 CSV 文件：

```
import csv
with open('data.csv', 'w', newline='') as csvfile:
    fieldnames = ['Name', 'Age']
    writer = csv.DictWriter(csvfile, fieldnames=fieldnames)
    writer.writeheader()
    writer.writerow({'Name': 'Alice', 'Age': 30})
    writer.writerow({'Name': 'Bob', 'Age': 25})

```

读取并处理 JSON 文件：

```
import json
with open('data.json', 'r') as f:
    data = json.load(f)
    for item in data:
        print(item['name'], item['age'])

```

写入 JSON 文件：

```
import json
data = [{'name': 'Alice', 'age': 30}, {'name': 'Bob', 'age': 25}]
with open('data.json', 'w') as f:
    json.dump(data, f, indent=4)

```

读取并处理 XML 文件：

```
import xml.etree.ElementTree as ET
tree = ET.parse('data.xml')
root = tree.getroot()
for child in root:
    print(child.tag, child.attrib)

```

写入 XML 文件：

```
import xml.etree.ElementTree as ET
root = ET.Element("root")
doc = ET.SubElement(root, "doc")
ET.SubElement(doc, "field1", 
ET.SubElement(doc, "field2", 
tree = ET.ElementTree(root)
tree.write("output.xml")

```

正则表达式匹配：

```
import re
text = "The quick brown fox jumps over the lazy dog"
pattern = r'\b\w{5}\b'
matches = re.findall(pattern, text)
print(matches)

```

正则表达式替换：

```
import re
text = "The quick brown fox jumps over the lazy dog"
new_text = re.sub(r'\b\w{5}\b', '*****', text)
print(new_text)

```

提取 URL：

```
import re
text = "Visit http://example.com and https://another-example.com"
urls = re.findall(r'http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\\(\\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+', text)
print(urls)

```

提取电子邮件地址：

```
import re
text = "Contact us at support@example.com or feedback@example.org"
emails = re.findall(r'[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}', text)
print(emails)

```

提取电话号码：

```
import re
text = "Call us at 123-456-7890 or 987-654-3210"
phone_numbers = re.findall(r'\b\d{3}[-.]?\d{3}[-.]?\d{4}\b', text)
print(phone_numbers)

```

提取日期：

```
import re
text = "Meeting on 2023-10-05 and 2023-10-10"
dates = re.findall(r'\b\d{4}-\d{2}-\d{2}\b', text)
print(dates)

```

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/HV2vGRIb33HYkjtmwNLxzIuk7HZ7LozxQsJvXvxZJ47jh2mJp9bfiaWZhE3xa2XV5vY0Gw1J29vxyLeXlN0pcMg/640?wx_fmt=gif&from=appmsg)

**6. 数学和科学计算**

基本数学运算：

```
import math
print(math.sqrt(16))  # 平方根
print(math.pow(2, 3))  # 幂运算
print(math.sin(math.pi / 2))  # 正弦函数

```

矩阵运算：

```
import numpy as np
a = np.array([[1, 2], [3, 4]])
b = np.array([[5, 6], [7, 8]])
c = np.dot(a, b)  # 矩阵乘法
print(c)

```

统计分析：

```
import numpy as np
data = np.array([1, 2, 3, 4, 5])
mean = np.mean(data)
median = np.median(data)
std = np.std(data)
print(f"Mean: {mean}, Median: {median}, Standard Deviation: {std}")

```

线性回归：

```
import numpy as np
from sklearn.linear_model import LinearRegression
X = np.array([[1], [2], [3], [4], [5]])
y = np.array([2, 4, 6, 8, 10])
model = LinearRegression()
model.fit(X, y)
print(model.coef_, model.intercept_)

```

聚类分析：

```
from sklearn.cluster import KMeans
import numpy as np
X = np.array([[1, 2], [1, 4], [1, 0],
              [10, 2], [10, 4], [10, 0]])
kmeans = KMeans(n_clusters=2, random_state=0).fit(X)
print(kmeans.labels_)

```

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/HV2vGRIb33HYkjtmwNLxzIuk7HZ7LozxQsJvXvxZJ47jh2mJp9bfiaWZhE3xa2XV5vY0Gw1J29vxyLeXlN0pcMg/640?wx_fmt=gif&from=appmsg)

**7. Web 开发**

简单的 Flask 应用：

```
from flask import Flask
app = Flask(__name__)
@app.route('/')
def home():
    return 'Hello, World!'
if __name__ == '__main__':
    app.run(debug=True)

```

Flask 路由参数：

```
from flask import Flask
app = Flask(__name__)
@app.route('/user/')
def show_user_profile(username):
    return f'User {username}'
if __name__ == '__main__':
    app.run(debug=True)

```

Flask 表单提交：

```
from flask import Flask, request
app = Flask(__name__)
@app.route('/login', methods=['POST'])
def login():
    username = request.form['username']
    password = request.form['password']
    return f'Username: {username}, Password: {password}'
if __name__ == '__main__':
    app.run(debug=True)

```

Flask 模板渲染：

```
from flask import Flask, render_template
app = Flask(__name__)
@app.route('/')
def home():
    return render_template('index.html')
if __name__ == '__main__':
    app.run(debug=True)

```

Flask 静态文件：

```
from flask import Flask, send_from_directory
app = Flask(__name__)
@app.route('/static/')
def serve_static(filename):
    return send_from_directory('static', filename)
if __name__ == '__main__':
    app.run(debug=True)

```

Django 简单项目：

```
bash
django-admin startproject myproject
cd myproject
python manage.py runserver

```

Django 模型定义：

```
from django.db import models
class Person(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30)

```

Django 视图：

```
from django.shortcuts import render
from .models import Person
def person_list(request):
    persons = Person.objects.all()
    return render(request, 'person_list.html', {'persons': persons})

```

Django 模板：

```
html
<!-- templates/person_list.html -->
<h1>Person List</h1>
<ul>
    {% for person in persons %}
        <li>{{ person.first_name }} {{ person.last_name }}</li>
    {% endfor %}
</ul>

```

Django 表单：

```
from django import forms
class PersonForm(forms.ModelForm):
    class Meta:
        model = Person
        fields = ['first_name', 'last_name']

```

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/HV2vGRIb33HYkjtmwNLxzIuk7HZ7LozxQsJvXvxZJ47jh2mJp9bfiaWZhE3xa2XV5vY0Gw1J29vxyLeXlN0pcMg/640?wx_fmt=gif&from=appmsg)

**8. 数据库操作**

SQLite 数据库操作：

```
import sqlite3
conn = sqlite3.connect('example.db')
c = conn.cursor()
# 创建表
c.execute('''CREATE TABLE stocks
             (date text, trans text, symbol text, qty real, price real)''')
# 插入数据
c.execute("INSERT INTO stocks VALUES ('2023-10-05','BUY','RHAT',100,35.14)")
# 提交事务
conn.commit()
# 查询数据
c.execute("SELECT * FROM stocks WHERE symbol = 'RHAT'")
print(c.fetchall())
# 关闭连接
conn.close()

```

MySQL 数据库操作：

```
import mysql.connector
conn = mysql.connector.connect(
    host='localhost',
    user='yourusername',
    password='yourpassword',
    database='yourdatabase'
)
cursor = conn.cursor()
# 创建表
cursor.execute('''CREATE TABLE stocks
                   (date VARCHAR(255), trans VARCHAR(255), symbol VARCHAR(255), qty DOUBLE, price DOUBLE)''')
# 插入数据
cursor.execute("INSERT INTO stocks (date, trans, symbol, qty, price) VALUES (%s, %s, %s, %s, %s)",
               ('2023-10-05', 'BUY', 'RHAT', 100, 35.14))
# 提交事务
conn.commit()
# 查询数据
cursor.execute("SELECT * FROM stocks WHERE symbol = 'RHAT'")
for row in cursor.fetchall():
    print(row)
# 关闭连接
cursor.close()
conn.close()

```

PostgreSQL 数据库操作：

```
import psycopg2
conn = psycopg2.connect(
    host='localhost',
    database='yourdatabase',
    user='yourusername',
    password='yourpassword'
)
cursor = conn.cursor()
# 创建表
cursor.execute('''CREATE TABLE stocks
                   (date VARCHAR(255), trans VARCHAR(255), symbol VARCHAR(255), qty DOUBLE PRECISION, price DOUBLE PRECISION)''')
# 插入数据
cursor.execute("INSERT INTO stocks (date, trans, symbol, qty, price) VALUES (%s, %s, %s, %s, %s)",
               ('2023-10-05', 'BUY', 'RHAT', 100, 35.14))
# 提交事务
conn.commit()
# 查询数据
cursor.execute("SELECT * FROM stocks WHERE symbol = 'RHAT'")
for row in cursor.fetchall():
    print(row)
# 关闭连接
cursor.close()
conn.close()

```

SQLAlchemy ORM 操作：

```
from sqlalchemy import create_engine, Column, Integer, String
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker
engine = create_engine('sqlite:///example.db')
Base = declarative_base()
class Person(Base):
    __tablename__ = 'persons'
    id = Column(Integer, primary_key=True)
    name = Column(String)
    age = Column(Integer)
Base.metadata.create_all(engine)
Session = sessionmaker(bind=engine)
session = Session()
# 插入数据
new_person = Person(name='Alice', age=30)
session.add(new_person)
session.commit()
# 查询数据
persons = session.query(Person).filter_by(name='Alice').all()
for person in persons:
    print(person.id, person.name, person.age)
# 关闭会话
session.close()

```

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/HV2vGRIb33HYkjtmwNLxzIuk7HZ7LozxQsJvXvxZJ47jh2mJp9bfiaWZhE3xa2XV5vY0Gw1J29vxyLeXlN0pcMg/640?wx_fmt=gif&from=appmsg)

**9. 其他**

定时任务：

```
import schedule
import time
def job():
    print("I'm working...")
schedule.every(10).seconds.do(job)
while True:
    schedule.run_pending()
    time.sleep(1)

```

多线程：

```
import threading
def print_numbers():
    for i in range(10):
        print(i)
def print_letters():
    for letter in 'abcdef':
        print(letter)
t1 = threading.Thread(target=print_numbers)
t2 = threading.Thread(target=print_letters)
t1.start()
t2.start()
t1.join()
t2.join()

```

多进程：

```
import multiprocessing
def print_numbers():
    for i in range(10):
        print(i)
def print_letters():
    for letter in 'abcdef':
        print(letter)
p1 = multiprocessing.Process(target=print_numbers)
p2 = multiprocessing.Process(target=print_letters)
p1.start()
p2.start()
p1.join()
p2.join()

```

异步编程：

```
import asyncio
async def print_numbers():
    for i in range(10):
        print(i)
        await asyncio.sleep(1)
async def print_letters():
    for letter in 'abcdef':
        print(letter)
        await asyncio.sleep(1)
async def main():
    task1 = asyncio.create_task(print_numbers())
    task2 = asyncio.create_task(print_letters())
    await task1
    await task2
asyncio.run(main())

```

日志记录：

```
import logging
logging.basicConfig(level=logging.DEBUG, format='%(asctime)s - %(levelname)s - %(message)s')
logging.debug('This is a debug message')
logging.info('This is an info message')
logging.warning('This is a warning message')
logging.error('This is an error message')
logging.critical('This is a critical message')

```

配置文件读取：

```
```
import configparser
config = configparser.ConfigParser()
config.read('config.ini')
db_host = config['DATABASE']['host']
db_port = config['DATABASE']['port']
db_user = config['DATABASE']['user']
db_password = config['DATABASE']['password']
print(f'DB Host: {db_host}, Port: {db_port}, User: {db_user}, Password: {db_password}')
```

```

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/HV2vGRIb33GmFsib62XnMPNEb8fPlHsn4twwDbkae4Apw67LTic5U5NCSOIia2vCsQvpo6VpndcYgKxec8ybKoUOA/640?wx_fmt=gif)  

**需要进微信沟通群，需关注订阅号后，回复 “群”，得到二维码长按识别进入，若二维码失效，请及时留言提醒，谢谢。**