<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/GIyryikBfkbCwF_ZlesnEA)

**免责声明：**由于传播、利用本公众号李白你好所提供的信息而造成的任何直接或者间接的后果及损失，均由使用者本人负责，公众号李白你好及作者不为此承担任何责任，一旦造成后果请自行承担！如有侵权烦请告知，我们会立即删除并致歉。谢谢！

**1**►

**工具介绍**

日常渗透过程中，经常会碰到一些网站需要破解其 JS 加密算法后，才能对数据包进行修改。我们将加密算法破解出来后，一般就是使用 python 的 requests 库，发送修改的数据包来进行渗透测试，导致效率低下，因此考虑将 JS 逆向的结果通过插件与 burp 结合，提高效率。在 JS 逆向结束之后，通过 RaindropEcho 提供的 JS 模版，导入到插件，就可以完成 burp 数据包的自动加解密。

**2**►

**工具使用**

**JS 逆向模版使用**

1、在 encryptFunction 函数里写好加密逻辑

2、在 config 里写好逆向代码对应的域名和接口

3、在 default_json 里写好逆向出来的初始原数据

JS 逆向模版如下：

```
const fs = require('fs');
// 上面自己编写加密函数
// 写加密函数的加载方式
function encryptFunction(data) {
    // 使用 JSON.parse 将字符串转换为 JSON 对象
    const json_data = JSON.parse(data);
    // 原来数据包时什么格式，就要返回什么格式
    return `data=${jeimit(json_data.data)}&crc=${json_data.crc}`
}
// 编写域名和接口
const config = {
    domain: "xxx.com",
    path: "/v3/xxx"
};
// 编写逆向出来的原数据
const default_json = {
}
// 下面代码不要动---------------------------------------------------------------
// 检查传递的参数数量
const mode = process.argv[2];
if (mode === 'config') {
    console.log(JSON.stringify(config));
    process.exit(0);
}
if (mode === 'default') {
    console.log(JSON.stringify(default_json));
    process.exit(0);
}
if (process.argv.length < 4) {
    console.error("Usage: node script.js [mode] [inputFile] [outputFile]");
    process.exit(1);
}
const inputFile = process.argv[3];
const outputFile = process.argv[4];
// 读取输入文件内容
let inputData;
try {
    inputData = fs.readFileSync(inputFile, 'utf8');
} catch (err) {
    console.error(`Error reading input file: ${inputFile}`, err);
    process.exit(1);
}
let outputData;
switch (mode) {
    case 'encrypt':
        outputData = encryptFunction(inputData);
        break;
    default:
        console.error(`Unknown mode: ${mode}`);
        process.exit(1);
}
// 将输出数据写入输出文件
try {
    fs.writeFileSync(outputFile, outputData, 'utf8');
} catch (err) {
    console.error(`Error writing to output file: ${outputFile}`, err);
    process.exit(1);
}

```

**导入插件**

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUBALcgGV46AqH0dmrrp1u6LibVN2stXCy8cS3wF2OYnlwJJz0RIvEcdFMMIiaa415gVBhlCmmFsUibQg/640?wx_fmt=png&from=appmsg)

**导入模板文件**  

step 1：选择 js 文件

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUBALcgGV46AqH0dmrrp1u6LCwbrLwXFzOBpZ32YjorecOmECYLAkeIyJvhlN5uMxaXAy8VwRA9PcQ/640?wx_fmt=png&from=appmsg)

step 2：测试 js 文件放置路径（注：js 文件路径一定不要有中文）

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUBALcgGV46AqH0dmrrp1u6L9NUtkSicKicqmBJb3yicuEiad0lSgM3obRpAGyuUu4bmNPw1k9uEhHBDfQ/640?wx_fmt=png&from=appmsg)

step 3：导入完成后

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUBALcgGV46AqH0dmrrp1u6LwRaH8GsOMNdXdyb4iaUzx1PeNbKz8W619iaCMKzoKYJaaTBWRUxU7bQA/640?wx_fmt=png&from=appmsg)

**插件使用**

注明：

*   本次演示，选用网站心跳包测试，无任何敏感数据，对网站无任何影响
    

step 1：选择对应的数据包

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUBALcgGV46AqH0dmrrp1u6L3nqvkj8NTZKSgqmUialeXiaaENWdKgMDDasfXaT7JP1KicxicoRUeahubg/640?wx_fmt=png&from=appmsg)

step 2：发送到插件

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUBALcgGV46AqH0dmrrp1u6Lepicntf8xC4ibPtulMY1XXnOU8ZTzBlssicd7Z7S6ibTSrIBI0TUSYHuDQ/640?wx_fmt=png&from=appmsg)

step 3：修改数据包成功发送

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUBALcgGV46AqH0dmrrp1u6L3YoK5VTzTicyeT8Toa28S5BzLcJsiaNH0ARkvrWtcpRrCRibEKZh1jy2Q/640?wx_fmt=png&from=appmsg)

**3**►

**TODO**

![](https://mmbiz.qpic.cn/mmbiz_png/XoIcX2HtlUBALcgGV46AqH0dmrrp1u6LSIQBKxmzjU3Lv6DZgiacsN0IUwx3rg2a1WtJd1NArzOwlTxyWMyqBBA/640?wx_fmt=png&from=appmsg)

**4**►

**工具获取**

**点击关注下方名片****进入公众号**

**回复关键字【240903****】获取****下载链接**

**5**►

**往期精彩**

[

![](https://mmbiz.qpic.cn/mmbiz_jpg/XoIcX2HtlUBtH0BtShfWmCHFjp9Rz56fI34GtZ0X3anlFUEuqgDEWKInIGKH61gjMeRLH108JpfFedulMGtpIQ/640?wx_fmt=jpeg)

某护网中的小程序渗透







](http://mp.weixin.qq.com/s?__biz=MzkwMzMwODg2Mw==&mid=2247508376&idx=1&sn=c1cf02d2432e786a725feda63f2e9e2f&chksm=c09ad2c8f7ed5bde326418494963dba3cf1552ee1b8d1866cc52d4c82117c1d8d8ecc26fc16b&scene=21#wechat_redirect)

[

![](https://mmbiz.qpic.cn/mmbiz_jpg/XoIcX2HtlUBtH0BtShfWmCHFjp9Rz56fIWL6ag9g99icNK2SqfzV3SicxytjkfPxWBHkUpTdDUiamNAXxjSCtGSmg/640?wx_fmt=jpeg)

推荐一个高质量的网络安全情报攻防站







](http://mp.weixin.qq.com/s?__biz=MzkwMzMwODg2Mw==&mid=2247508355&idx=1&sn=0b2d6f1f6d8994915f6c2a6e6d11f678&chksm=c09ad2d3f7ed5bc5893e2adf13a17b80d4089d0aeff1e8b357f43d7d5b516980897c2e2e8ca7&scene=21#wechat_redirect)

[

![](https://mmbiz.qpic.cn/mmbiz_jpg/XoIcX2HtlUAKZ5vM6n4K7kpIeWTVab046iaibrfIRaicibHj4JCq7GKLQOowaQ2ia4ia7aAtGnJVtiaDVmymroakOqOng/640?wx_fmt=jpeg)

四天拘留期结束，Telegram 首席执行官将接受巴黎法官审判







](http://mp.weixin.qq.com/s?__biz=MzkwMzMwODg2Mw==&mid=2247508340&idx=1&sn=f8aea72d8ad61ab9b6bd7718c115c38b&chksm=c09ad224f7ed5b329a5355518dea03d93969528e0ec2eaed93fe6c3f7471b4b124c00004d684&scene=21#wechat_redirect)

![](https://mmbiz.qpic.cn/mmbiz_gif/0VlSQrG5VxaFSrqyULYn7RsCv3gdVCDeTDAKgRQSqoKjPWuicu16jU803JO0NMdHqUfpbTWJwVXAibCymA6ROYlA/640?wxfrom=5&wx_fmt=gif&wx_lazy=1)

![](https://mmbiz.qpic.cn/mmbiz_gif/0VlSQrG5VxaFSrqyULYn7RsCv3gdVCDeTDAKgRQSqoKjPWuicu16jU803JO0NMdHqUfpbTWJwVXAibCymA6ROYlA/640?wxfrom=5&wx_fmt=gif&wx_lazy=1)

![](https://mmbiz.qpic.cn/mmbiz_gif/0VlSQrG5VxaFSrqyULYn7RsCv3gdVCDeTDAKgRQSqoKjPWuicu16jU803JO0NMdHqUfpbTWJwVXAibCymA6ROYlA/640?wxfrom=5&wx_fmt=gif&wx_lazy=1)

![](https://mmbiz.qpic.cn/mmbiz_gif/0VlSQrG5VxaFSrqyULYn7RsCv3gdVCDeTDAKgRQSqoKjPWuicu16jU803JO0NMdHqUfpbTWJwVXAibCymA6ROYlA/640?wxfrom=5&wx_fmt=gif&wx_lazy=1)