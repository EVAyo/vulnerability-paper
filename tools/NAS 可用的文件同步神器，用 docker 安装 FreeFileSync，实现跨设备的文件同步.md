<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/KgYrD7GqAxw7f-Z-nqlb3g)

点个黄星及时收到文章，回复【微信群】可加群  

QQ 1 群：670661706（满）

QQ 2 群：938231761

【本文 docker 镜像】点击左下角阅读原文，提取码: tr40

* * *

| 前言  

FreeFileSync 是一款文件夹比较和同步软件，可创建和管理所有重要文件的备份副本。FreeFileSync 不是每次都复制每个文件，而是确定源文件夹和目标文件夹之间的差异，并仅传输所需的最少量数据。

该项目通过 docker 实现了 FreeFileSync 的部署，让我们可以在 NAS 端方便快捷的使用 FreeFileSync，只需要配置不同同步文件夹之间的容器路径，即可以实现最小差异的同步文件夹，帮助我们做好数据备份。

![](https://mmbiz.qpic.cn/mmbiz_png/wA0rnAvSU9BpqcTDO1lrGx6pbtLNVBS1SgiceKhZZvzODQl5wfmic78YZK08Tg2AtaZRMe7rP1pTk4pHZsSjVDUQ/640?wx_fmt=png&from=appmsg)

**项目地址：**

```
https://github.com/jlesage/docker-freefilesync

```

项目特性：  

> 1. 双向同步：确保两侧文件夹高度一致，使文件及结构保持相同  
> 2. 全量备份：全盘更新源地址下的文件和结构  
> 3. 增量备份：寻求左右侧差异，只更新源地址下变化的内容到目标地址  
> 4. 自定义：自定义需求和同步文件内容

* * *

| 系统部署教程
========

一、导入镜像

如果无法访问 docker 下载地址的，可以通过本网盘下载镜像压缩包（exe 格式），解压为 tar 格式以后上传至 NAS 的自定义路径。然后通过 NAS 的镜像导入功能导入，或通过 ssh 输入以下指令导入

```
阿里云盘：https://www.alipan.com/s/kK4M9gHgFz7
提取码: tr40
# path代表真实路径，XXX.tar代压缩包
docker load -i /path/XXXX.tar

```

二、compose 代码  

🔻新建文件夹路径 / volume1/docker/filesync，在 / volume1/docker/filesync / 上传 docker-compose.yml 文件，将下面代码复制进去。compose 代码，根据自己的需要修改

```
version: "3"
services:
  freefilesync:
    ports:
     - 5800:5800   # WEBUI端口
     - 5900:5900   # VNC协议端口，可选
    container_name: freefilesync
    environment:
      - TZ:Aisa/Shanghai
    volumes:
      - /volume1/docker/filesync/:/config
      - /volume1/files_1:/storage1                                 # 同步文件夹A
      - /volume2/files_2:/storage2                                 # 同步文件夹B
    image: jlesage/freefilesync

```

三、部署系统  

方法一：SSH 部署（绿联 nas 等通用）  

```
# 来到文件夹目录
cd /volume1/docker/容器名/
# 启动容器
docker-compose up -d

```

方法二：群晖部署 compose  

打开 container manager，选择项目，点击新建，选择路径，点击下一步即可  
![](https://mmbiz.qpic.cn/mmbiz_png/wA0rnAvSU9BpqcTDO1lrGx6pbtLNVBS1Ye13KUVQVaYdJtv6t6JeK7Mf6dkbyGaibZfLUxYw55CbfwpNiaFiaOFwA/640?wx_fmt=png&from=appmsg)

方法三：威联通部署 compose

打开 container station，选择【应用程序】，点击【创建】，将代码复制进去，点击验证后部署即可  
![](https://mmbiz.qpic.cn/mmbiz_png/wA0rnAvSU9BpqcTDO1lrGx6pbtLNVBS1DPqYneJ4V2sAs61YK1ry9B4Shh10ziaYqZBKaWJIAU3lSNeqiaYXzxBg/640?wx_fmt=png&from=appmsg)

方法四：铁威马部署 compose

打开 Docker Manager，选择【项目】，点击【+】，选择文件路径以后，填入代码即可

![](https://mmbiz.qpic.cn/mmbiz_png/wA0rnAvSU9BpqcTDO1lrGx6pbtLNVBS1UjUrTAX8ibGENMTn90mrfvm0d0u0RpPnRCg7AxYonb50tyibicZ9EUMFQ/640?wx_fmt=png&from=appmsg)

请在微信客户端打开

  

===

| 系统使用简介
========

左侧是我们的源文件夹，右侧是需要目标文件夹，默认是双向同步  
![](https://mmbiz.qpic.cn/mmbiz_png/wA0rnAvSU9BpqcTDO1lrGx6pbtLNVBS1VOXjy62oPDmmIosUNicUxyhibwOW3B2ibocrrgs9SfcYBc26gY0cdhV6w/640?wx_fmt=png&from=appmsg)

支持云端存储的配置，目前仅支持 google drive、FTP、SFTP，换句话说，只要我们的 NAS 开通了 FTP 服务，可以实现跨 NAS 的同步，而不需要配置过多的网络连接。  

![](https://mmbiz.qpic.cn/mmbiz_png/wA0rnAvSU9BpqcTDO1lrGx6pbtLNVBS1X8mFvJdZW1gSct84w4J7rmHUxVdMEAmVGjfjKtvib5F7y2KLCAGy0xA/640?wx_fmt=png&from=appmsg)

在设置里可配置计算文件差异的方式，比如创建时间、尺寸、大小、内容等  

![](https://mmbiz.qpic.cn/mmbiz_png/wA0rnAvSU9BpqcTDO1lrGx6pbtLNVBS1At2SLcpQSOWKia4FGM6glTrRDhqficbbKE2JMwAo5I0BgrAVibH76Hx0Q/640?wx_fmt=png&from=appmsg)

在 filter 里面可以设置备份策略，对备份文件的类型、格式进行设置  

![](https://mmbiz.qpic.cn/mmbiz_png/wA0rnAvSU9BpqcTDO1lrGx6pbtLNVBS1emmnibVRERhyRS26lolcR1l6OzodXp1Mc5oba2gJKZqScBqLGHX0v0A/640?wx_fmt=png&from=appmsg)

可配置同步方向，正如前文所说的同步、镜像、增量、自定义，箭头表示备份方向。  

![](https://mmbiz.qpic.cn/mmbiz_png/wA0rnAvSU9BpqcTDO1lrGx6pbtLNVBS1IAhiarZ2Y8qia6H7BssPu6lze0fX2VVYTMBtQOhqNutEHYjvtiao4VKyg/640?wx_fmt=png&from=appmsg)