<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/iha8r5nqfc_TwwsIYwovkg)

### 点击蓝字，关注我们

小程序 11065 版本开启控制台方法
-------------------

本文写于微信版本 3.9.11.19

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNmonxBwzApaAxhQiccgJmwTdico0M3ZjtHaCwmMYGwufGicPI6nJ0J3M6Q/640?wx_fmt=png&from=appmsg)

当前小程序版本是 11065 小程序版本查看

```
%USERPROFILE%\AppData\Roaming\Tencent\WeChat\XPlugin\Plugins\RadiumWMPF


```

这里借用了 Jammny 师傅的思路，[https://mp.weixin.qq.com/s/hAvFEgYrejYAfFGk9gY50Q](https://mp.weixin.qq.com/s?__biz=MzIyMjkzMzY4Ng==&mid=2247503720&idx=1&sn=e4c09f756d311b4cd703587fc29c7e33&scene=21#wechat_redirect)

之前开始看的时候部分代码应该是重写了, 按文章的思路找不到, 但是搜字符串的大体思路是不变的，本文所提到的方法随时间的推移也可能会失效 这里需要用到 WeChatOpenDevToolshttps://github.com/JaveleyQAQ/WeChatOpenDevTools-Python

作者没更新最新版的地址，我们自己手动找到并添加 到小程序位置把 WeChatAppEx.exe 复制一份出来

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNQF6NUoOJwrusmUECxuaag1owGUb8UQTFQEKJibCEIO8eF1nx0asx3HA/640?wx_fmt=png&from=appmsg)

紧接着拖到 ida 里打开 进行字串的搜索 快捷键是 **shift+F12**(第一次打开这里很慢)

LaunchAppletBegin
-----------------

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMN8aEXWACx5DI7HIo8icWqia5JFcn5yB3PeQxGArdUicmiaUeqVXDXBiaUBJw/640?wx_fmt=png&from=appmsg)

然后在字串里面搜索

```
WxWork isMiniGame, exit!


```

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNCPW25ne9ohGtS3Cj4J2BUKyv8plDTpLvYdFzUTM9XnNib32qiaQlAJgw/640?wx_fmt=png&from=appmsg)

得到结果之后我们到. rdata 那边去，然后在定位该地址所引用的位置 选中那个位置然后按住快捷键 x 出的来的就是我们想要找的那个函数

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNkIicqwQPLuRicQiaHaNZ50b5Vk4uSWXmpeoe701LrAyFFLeOiaODGY6FPA/640?wx_fmt=png&from=appmsg)

然后一直往上滑，找到函数的入口点

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNic7tjibh5uCCDuUXRM2jl5R9cQibbh2MwXCP6O5ImmxwSXIAPy2ZLRt5Q/640?wx_fmt=png&from=appmsg)

这里 IDA 起始地址为 140000000，那么相对偏移地址为：**0x288887C**，对应的 json 格式为：

```
{
  "LaunchAppletBegin": "0x288887C",
    ..............
}


```

MenuItemDevToolsString
----------------------

在 IDA 里面搜索  engineStart

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNyGeTeNZicUBPUbBPVzwpFicOxFON0ia4HGhPiaJKvl8WlHgllNUxmvVatA/640?wx_fmt=png&from=appmsg)

去到. rdata 下 找关键部分 在其上方就存了 **devTools** 的值

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNicxib8xFkPSib9c3Aa8FicwKX5Y0ibT9P9Wa8N8wiafFVR7HFYn2iaRqJXmkg/640?wx_fmt=png&from=appmsg)

转为字符串类型就可以看到

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNfHkFeyKJ5qTuLxeZBk0moN4GqRENUpI5nJCtw0K3AQr2xNQMiavhkhA/640?wx_fmt=png&from=appmsg)

然后在 devtools 出找出引用部分

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNTmy6RFRaQI3Pl0BejQM06iag0jUDywA8iajuWXQqsdJTY0kbOCaeCcuw/640?wx_fmt=png&from=appmsg)

去到 cmp 指令处 此处地址即为第二处 MenuItemDevToolsString 的地址

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNeGkDice4cIpsBNngwnqSRH4fVjfuceVWsxyckMrbLtCvVShJ9WRLCsQ/640?wx_fmt=png&from=appmsg)

还和前面一样去掉 000000014

```
{
        ............
  "MenuItemDevToolsString":"0x2896291",
        ............
}


```

SwitchVersion
-------------

继续搜索 字串 "/devtools/wechat_%s.html" 在其上方 cmovnz 指令处即为 SwitchVersion 处的地址

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNhRicGCNuJHqDCbFC5ShyHzukvg0F9b5I5VGqaA0Qz8pzkhPy974cblg/640?wx_fmt=png&from=appmsg)

```
{
      ............
  "SwitchVersion":"0x26B9CD8",
      ............
}


```

此外还要注意需修改下 Version 完整的 address_11065_x64.json 为

```
{  
  "LaunchAppletBegin": "0x2888872",  
  "MenuItemDevToolsString":"0x2896291",  
  "SwitchVersion":"0x26B9CD8",  
  "Version":11065  
}


```

紧接着在修改下`scripts/hook.js`添加一段当前版本的调用 case 11065

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNxb8NLkLaTYSNicLZTBr4jhBcz5nqyiaaIJiaNKRuJc5vJmiaPr3KUFBSPg/640?wx_fmt=png&from=appmsg)

最后在 运行脚本 即可完成最新版 F12 开启控制台  工具获取后台回复 “20240731”

```
python3 main.py -x


```

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CGN2EctBgwSC8em3nwnbUw8TdO6SACMNSZibJ7GibByaYtxnn7BG9wGS3GXplEia6raPz7YLZNQnG66baooyKwQiag/640?wx_fmt=png&from=appmsg)

点点关注不迷路~