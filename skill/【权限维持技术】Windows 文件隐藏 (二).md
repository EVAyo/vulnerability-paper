<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/Q2FvQF8L7F5i6wLkc0kc0w)

  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/Op7Y2S0HyKx4Sibx9mxsrz68yfgLOMCxU05FFBGZtaHqGlp9uPhdwKhs0vLnxgibBpLrwfGhQVWpIHdjxlfhDyLg/640?wx_fmt=png)

免责声明

![](https://mmbiz.qpic.cn/mmbiz_png/yRDp2K3ZBpKOicaBvhSTPZYqTVq8ku50NMtfAqkWhJw2cyMfYEhzIZHlVGLH0Wl2tQ8usSOv6xbZxBiabe1XiaLhA/640?wx_fmt=png)

  

本文仅用于技术讨论与学习，利用此文所提供的信息而造成的任何直接或者间接的后果及损失，均由使用者本人负责，文章作者及本公众号不为此承担任何责任。

  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/Op7Y2S0HyKx4Sibx9mxsrz68yfgLOMCxU05FFBGZtaHqGlp9uPhdwKhs0vLnxgibBpLrwfGhQVWpIHdjxlfhDyLg/640?wx_fmt=png)

NTFS 数据流

![](https://mmbiz.qpic.cn/mmbiz_png/yRDp2K3ZBpKOicaBvhSTPZYqTVq8ku50NMtfAqkWhJw2cyMfYEhzIZHlVGLH0Wl2tQ8usSOv6xbZxBiabe1XiaLhA/640?wx_fmt=png)

  

“交替数据流（Alternate Data Streams, ADS）” 是 Windows NTFS 文件系统的高级特性。文件中可以包含多个数据流（Data Stream），并且这些数据流对用户是透明的，也就是说，用户在操作文件的时候，只能看到并操作默认的数据流，而无法看到和操作其他的数据流。因此可以利用数据流的特性进行文件隐藏。

  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/Op7Y2S0HyKx4Sibx9mxsrz68yfgLOMCxU05FFBGZtaHqGlp9uPhdwKhs0vLnxgibBpLrwfGhQVWpIHdjxlfhDyLg/640?wx_fmt=png)

复现

![](https://mmbiz.qpic.cn/mmbiz_png/yRDp2K3ZBpKOicaBvhSTPZYqTVq8ku50NMtfAqkWhJw2cyMfYEhzIZHlVGLH0Wl2tQ8usSOv6xbZxBiabe1XiaLhA/640?wx_fmt=png)

  

1.  执行以下 cmd 命令将内容写到文件的非默认数据流中：
    

```
echo "hidden text" > fatmo01.txt:hidden.txt

```

![](https://mmbiz.qpic.cn/sz_mmbiz_png/FVvAFkxoh9DwhkRxbHtTInAmJNLjgTgG8HA9QIudN8DJTxfhdt99HibicAVI7gwxHETllYv73Qia2Q94wPYX3hBpQ/640?wx_fmt=png)

2. 此时打开文件 fatmo01.txt，是看不到内容的：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/FVvAFkxoh9DwhkRxbHtTInAmJNLjgTgGg6ChPKfBCJ52ric6SSnEynR3sXrK3NkiaFEZibObZDknhCXbSv2hLPsAg/640?wx_fmt=png)

3. 可以通过操控数据流的方式查看文件内容，执行如下 more 指令查看。其中 more 是一个在命令行界面中用于逐页显示文本文件内容的命令：  

```
more < fatmo01.txt:hidden.txt

```

![](https://mmbiz.qpic.cn/sz_mmbiz_png/FVvAFkxoh9DwhkRxbHtTInAmJNLjgTgGtbWU2icCrrYyUzeR1EUPAgqx8oWXxOHDIgWGkHfFgO291luVp23T0zA/640?wx_fmt=png)

4. 这种方法只能隐藏文件内容，无法隐藏文件本身  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/FVvAFkxoh9DwhkRxbHtTInAmJNLjgTgG1rduZBVwN08Pf7w5eTLsaYIKTugDN7N4icKrrXGYPALfsFI0Re1g9xQ/640?wx_fmt=png)

  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/Op7Y2S0HyKx4Sibx9mxsrz68yfgLOMCxU05FFBGZtaHqGlp9uPhdwKhs0vLnxgibBpLrwfGhQVWpIHdjxlfhDyLg/640?wx_fmt=png)

检测方法

![](https://mmbiz.qpic.cn/mmbiz_png/yRDp2K3ZBpKOicaBvhSTPZYqTVq8ku50NMtfAqkWhJw2cyMfYEhzIZHlVGLH0Wl2tQ8usSOv6xbZxBiabe1XiaLhA/640?wx_fmt=png)

  

1.  使用如下命令可以显示文件的其他数据流：
    

```
dir /r fatmo01.txt

```

![](https://mmbiz.qpic.cn/sz_mmbiz_png/FVvAFkxoh9DwhkRxbHtTInAmJNLjgTgGFzvATRwCMkXxkibZNGd0CjvReg7icKG7VrWDQ4ZVfxwPMnlxzGmpSTxA/640?wx_fmt=png)

2. 使用微软官方工具 streams.exe 进行检测，该工具在 Systeminternal Suite 工具集中：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/FVvAFkxoh9DwhkRxbHtTInAmJNLjgTgGpaf5I4nFlU9verSGhIn5TGedAxFtNxKL2VyVd33R02jGKeGwrmWOtg/640?wx_fmt=png)