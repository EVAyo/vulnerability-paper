<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/NFAvTFfTNAwIqsYd9dCD-Q)

![](https://mmbiz.qpic.cn/mmbiz_gif/3xxicXNlTXLicwgPqvK8QgwnCr09iaSllrsXJLMkThiaHibEntZKkJiaicEd4ibWQxyn3gtAWbyGqtHVb0qqsHFC9jW3oQ/640?wx_fmt=gif)

1

起因

![](https://mmbiz.qpic.cn/mmbiz_png/yvyDfwhvzpjR8evyNqMMTO6Wj0Mjp5cwVOypnJ52f705JRSIGicyfSrqiaRE2sN5XAqCcZvhiaRWeOr2ZCgETNepg/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1)

  

翻看文章时看到 bebiks 师傅公开了一份漏洞报告，危害和奖金都挺高的。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/dAMlD06OYdJ5HSY4qfP5T2LC1vcflVWib2LuZjfvrWib8E8XOr0QUlA69zAKkWRcm8OEAricDuAAZZIMSOfCY8UCw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

就想看看怎么玩，之前没搞过 js 监控这里就了解一下，顺便找了找找有什么工具可以用。

  

2

漏洞正文

![](https://mmbiz.qpic.cn/mmbiz_png/yvyDfwhvzpjR8evyNqMMTO6Wj0Mjp5cwVOypnJ52f705JRSIGicyfSrqiaRE2sN5XAqCcZvhiaRWeOr2ZCgETNepg/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1)

  

通过 js 监控发现，出现了一个新的 Google Docs 链接：

https://docs.google.com/forms/d/1cwHTgNBd51ECJ3w-5Hy6LgioJWhJ2qFF_vdlmXb6zao/edit#responses

![](https://mmbiz.qpic.cn/sz_mmbiz_png/dAMlD06OYdJ5HSY4qfP5T2LC1vcflVWib9Ljrnia7b2WMW02jTxKkQkkoJWcE6LJOvHgj4em9trXyfE2Mibiaibm8Ug/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

此 google docs 链接已在位于以下位置的 JS 文件中泄露：

https://xxxxxx.com/assets/static/js/5930.078b8e86.chunk.js

允许攻击者编辑任何内容并查看有关用户的一些敏感数据，例如电子邮件 / 调查回复。

  

3

工具推荐

![](https://mmbiz.qpic.cn/mmbiz_png/yvyDfwhvzpjR8evyNqMMTO6Wj0Mjp5cwVOypnJ52f705JRSIGicyfSrqiaRE2sN5XAqCcZvhiaRWeOr2ZCgETNepg/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1)

  

推荐监控工具：

https://github.com/ahussam/url-tracker

可检查不同时间段（每小时、每天、每周、每月）的网页内容，并检测自上次检查以来是否修改了网页内容。它可用于监控 S3、Azure、JS 文件...... 等。

  

4

工具案例

![](https://mmbiz.qpic.cn/mmbiz_png/yvyDfwhvzpjR8evyNqMMTO6Wj0Mjp5cwVOypnJ52f705JRSIGicyfSrqiaRE2sN5XAqCcZvhiaRWeOr2ZCgETNepg/640?wx_fmt=png&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1)

  

  

这里工具的作者也给出了一个案例，在某次使用打车 app 的时候，存在莫名其妙的收费。于是进行投诉，客服给发了一个邮件，发现图片挂掉了。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/dAMlD06OYdJ5HSY4qfP5T2LC1vcflVWibKrENgGqqwXSd2YUnrcWV2pciaW7PRplLXuicCfibb1evIcTIiaSmSh4PPw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

就分析了一下，发现图片存储的 Bucket 不存在了（也就是过期被回收了）。

NoSuchBucket

![](https://mmbiz.qpic.cn/sz_mmbiz_png/dAMlD06OYdJ5HSY4qfP5T2LC1vcflVWibGIGTT8Q4yYcmdA1PuWSegibj2ichnH4oDR0fPlAKta4EExB9pqcHk95A/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

在这里就可以通过重新申请，接管 Bucket

![](https://mmbiz.qpic.cn/sz_mmbiz_png/dAMlD06OYdJ5HSY4qfP5T2LC1vcflVWibic91mKZQmFUCtEVGba8xicickT5wpLxdTMnfhctbpm4tTDWY3L3KfhwIA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

就是这次的漏洞出现，工具作者就写出了这款工具，用于长期监控。

  

> **文章来源：None 安全团队**

黑白之道发布、转载的文章中所涉及的技术、思路和工具仅供以安全为目的的学习交流使用，任何人不得将其用于非法用途及盈利等目的，否则后果自行承担！

如侵权请私聊我们删文  

**END**