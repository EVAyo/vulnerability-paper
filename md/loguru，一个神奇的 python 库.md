<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/csxPONEaUbTdoRMd9opuMw)

大家好，我是小寒。

今天给大家分享一个神奇的 python 库，**loguru**

**https://github.com/Delgan/loguru**

Loguru 是一个旨在为 Python 带来愉快的日志记录的库，它可以完全增强你的日志记录体验，并且非常易于使用。

![](https://mmbiz.qpic.cn/mmbiz_png/ibPqnScajrbFXibrF6VS6zXK4pltia1TExfYWdLS5UZ5sfPuebVEmR6UvHhv51Knbib0iccsWhfyoo0rkVTeHI360dg/640?wx_fmt=png)

### 初体验

#### 库的安装

安装 Loguru 也非常简单，可以直接使用 pip 进行安装。

```
pip install loguru

```

在 Loguru 中，如果需要**将调试日志输出到终端**，可以执行以下操作。

```
from loguru import logger
logger.debug("That's it, beautiful and simple logging!")

```

如果需要**将日志输出到文件中**，只需这样做。

```
from loguru import logger
logger.add("file_{time}.log")
logger.debug("That's it, beautiful and simple logging!")


```

这将在当前运行的文件夹中生成 file_current time.log 的日志文件。

#### 滚动日志和压缩

使用 Loguru 你可以轻松实现滚动日志。

##### 按时间滚动

比如要按时间滚动，只需要在 logger.add 参数中添加一个 rotation 参数即可。

```
from loguru import logger
logger.add("file_2.log", rotation="12:00") # Create new file at 12AM
logger.debug("That's it, beautiful and simple logging!")

```

这样，如果当前时间超过了这个设定的时间，就会生成一个新的日志文件。如果没有，请使用原始日志文件。

##### 按大小滚动

除了按时间滚动日志外，Loguru 还可以按日志大小滚动。

```
from loguru import logger
logger.add("file_1.log", rotation="1 MB")
logger.debug("That's it, beautiful and simple logging!")

```

这样，一旦日志文件大小超过 1MB，就会生成一个新的日志文件。

##### 压缩日志

如果你不想删除原来的日志文件，Loguru 还支持直接压缩日志。

```
from loguru import logger
logger.add("file_Y.log", compression="zip")

```

       

#### 其它特性

##### 定制颜色

Loguru 支持自定义颜色，如果你不喜欢它的默认颜色，你可以这样更改。

```
logger.add(sys.stdout, colorize=True, format="<green>{time}</green> <level>{message}</level>")

```

##### 多进程安全

Loguru 默认是线程安全的，但它不是多进程安全的。

但如果你需要多进程 / 异步日志记录，它也支持，只需添加一个 enqueue 参数即可。

```
logger.add("somefile.log", enqueue=True)


```

##### 回溯支持

对于日志来说，**没有错误栈的日志是没有灵魂的**。Loguru 允许你显示整个堆栈信息以帮助你发现问题（包括变量）。例如：

```
def func(a, b):
    return a / b

def nested(c):
    try:
        func(5, c)
    except ZeroDivisionError:
        logger.exception("What?!")

nested(0)

```

##### 电子邮件提醒

Loguru 可以与强大的电子邮件通知模块结合使用，以便在程序意外失败时接收电子邮件，或发送许多其他类型的通知。

```
import notifiers

params = {
    "username": "test@gmail.com",
    "password": "abc123",
    "to": "test@gmail.com"
}

# Initialize email
notifier = notifiers.get_notifier("gmail")
notifier.notify(message="The application is running!", **params)

# Email alert for error
from notifiers.logging import NotificationHandler

handler = NotificationHandler("gmail", defaults=params)
logger.add(handler, level="ERROR")

```

**这样配置后，每次产生 Error 日志时，程序都会自动向你的邮箱发送警报，真是方便。**

除了这些功能之外，Loguru 还支持与 Python 原生 Logging 模块的兼容，你可以将原始标准记录器记录的所有信息转移到 Loguru 中。

你还可以基于 Loguru 自定义新的日志级别，并自定义你喜欢的结构化数据。

**最后**

—  

**今天的分享就到这里。如果觉得不错，点赞，转发安排起来吧。**

接下来我们会分享更多的 **「深度学习案例以及 python 相关的技术」**，欢迎大家关注。

最后，最近新建了一个 python 学习交流群，会经常分享 **「python 相关学习资料，也可以问问题，非常棒的一个群」**。

**「进群方式：加我微信，备注 “python”」**

  

![图片](https://mmbiz.qpic.cn/mmbiz_png/ibPqnScajrbEqW4ZLcv8eGSBwiatLtkMkvIxms6PbQ7V77iaqRRFPpbWibEb4N9fN6icnrRiacfM1l7c0dF2aPQwiaETg/640?wx_fmt=png)

**往期回顾**

![图片](https://mmbiz.qpic.cn/mmbiz_png/ibPqnScajrbEqW4ZLcv8eGSBwiatLtkMkvIxms6PbQ7V77iaqRRFPpbWibEb4N9fN6icnrRiacfM1l7c0dF2aPQwiaETg/640?wx_fmt=png)

  

![图片](https://mmbiz.qpic.cn/mmbiz_png/ibPqnScajrbEqW4ZLcv8eGSBwiatLtkMkvIxms6PbQ7V77iaqRRFPpbWibEb4N9fN6icnrRiacfM1l7c0dF2aPQwiaETg/640?wx_fmt=png)

[Fashion-MNIST 服装图片分类 - Pytorch 实现](http://mp.weixin.qq.com/s?__biz=MzU5NjE0NjI1MQ==&mid=2247486859&idx=1&sn=60bd671684ef0e8a3d1c7537a86b505b&chksm=fe666cafc911e5b9d9a6e3dfc769091769505c746a1468753c9bf23777c8733e7fd57dd594d9&scene=21#wechat_redirect)  

![图片](https://mmbiz.qpic.cn/mmbiz_png/ibPqnScajrbEqW4ZLcv8eGSBwiatLtkMkvIxms6PbQ7V77iaqRRFPpbWibEb4N9fN6icnrRiacfM1l7c0dF2aPQwiaETg/640?wx_fmt=png)

[python 探索性数据分析（EDA）案例分享](http://mp.weixin.qq.com/s?__biz=MzU5NjE0NjI1MQ==&mid=2247486931&idx=1&sn=6624ffa4d6207d496d7f4107b506af5c&chksm=fe666cf7c911e5e1bca87eabb038d16d3f589dc783a92a5d12e2a8a4887a8706b7f609af4be0&scene=21#wechat_redirect)  

![图片](https://mmbiz.qpic.cn/mmbiz_png/ibPqnScajrbEqW4ZLcv8eGSBwiatLtkMkvIxms6PbQ7V77iaqRRFPpbWibEb4N9fN6icnrRiacfM1l7c0dF2aPQwiaETg/640?wx_fmt=png)

[深度学习案例分享 | 房价预测 - PyTorch 实现](http://mp.weixin.qq.com/s?__biz=MzU5NjE0NjI1MQ==&mid=2247486679&idx=1&sn=c07734de23df4f834fc9d8c3651b33a7&chksm=fe666df3c911e4e5b03b00a3cb0d2e75535c2f94fdd17631b713a8506d788a4ddd2ccdd7c6f2&scene=21#wechat_redirect)  

![图片](https://mmbiz.qpic.cn/mmbiz_png/ibPqnScajrbEqW4ZLcv8eGSBwiatLtkMkvIxms6PbQ7V77iaqRRFPpbWibEb4N9fN6icnrRiacfM1l7c0dF2aPQwiaETg/640?wx_fmt=png)

[万字长文 |  面试高频算法题之动态规划系列](http://mp.weixin.qq.com/s?__biz=MzU5NjE0NjI1MQ==&mid=2247486119&idx=1&sn=8ef439f31a9fe2695b48e5d67eb47fde&chksm=fe666b83c911e2950f00e5be3a2f9274dc561205c7da23192f3094b9722ea81977d0b01eb5ec&scene=21#wechat_redirect)  

![图片](https://mmbiz.qpic.cn/mmbiz_png/ibPqnScajrbEqW4ZLcv8eGSBwiatLtkMkvIxms6PbQ7V77iaqRRFPpbWibEb4N9fN6icnrRiacfM1l7c0dF2aPQwiaETg/640?wx_fmt=png)

[面试高频算法题之回溯算法（全文六千字）](http://mp.weixin.qq.com/s?__biz=MzU5NjE0NjI1MQ==&mid=2247486039&idx=1&sn=b4614e27adbb6ea9949385f92c64b479&chksm=fe666b73c911e265a94801ae58162a592e849d6cc6d6e8efef91f1448f269df32d086c908052&scene=21#wechat_redirect)  

  

  

![图片](https://mmbiz.qpic.cn/mmbiz_png/ibPqnScajrbEqW4ZLcv8eGSBwiatLtkMkvaIPJfEjUI6KocPNAlfVQHLBffGSjsibVtL9ve8KmrwDibpV2fjxVoibGQ/640?wx_fmt=png)

如果对本文有疑问可以加作者**微信**直接交流。进技术交流群的可以加微信拉你进群。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/ibPqnScajrbHicqRSzdWQL3J4Qn0c8NpibZAXP7UokbMyReXU5XKYbpQa0jRMqa53g5KlwKt2PwQacDIL66M1MWSg/640?wx_fmt=jpeg)