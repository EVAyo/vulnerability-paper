<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/W1_ALcnVGUmkg30b5pd6DA)

  

点击上方蓝字关注我们吧

![](https://mmbiz.qpic.cn/mmbiz_gif/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCfWkdBgdjQ0pw4834ju71Vfbibz3zCiaG5vfLRooeu8WsXIIMz1mjVwXA/640?wx_fmt=gif&from=appmsg)

> 最近在划水群看到好几个师傅因为搭建 cs 学习导致服务器被封，应该是被服务器检测了。那今天分享一下从 0 到 1 学习 cs 二开，让服务器被封成为过去式，文中有错误的地方还请师傅们多多指正，后续有多篇关于 cs 二开的文章，这只是基础篇，还请师傅关注公众号回复 “加群”，群中有分享第一时间通知到大家。

使用工具
----

```
idea
java-decompiler.jar
cs 4.4
CrackSleeve

```

破解流程
----

首先下载 cs4.4： 

https://github.com/k8gege/Aggressor/releases/tag/cs[1] 

对比 hash 地址： 

https://verify.cobaltstrike.com/[2] 

对比 hash：

```
certutil -hashfile CobaltStrike_4.4_000.jar sha256

```

![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCDY8aEia4QIwicbsML3GxbibO0qyrERX2j07Eicr59vm0sY16CG328IU8uA/640?wx_fmt=png&from=appmsg)![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCviar6e3WGxYLghbqKic3FOMqgibSvviceRFb0SZyOa45vRdgHGtySoQ1IA/640?wx_fmt=png&from=appmsg)在 idea 插件中安装反编译插件 (Java Bytecode Decompiler)![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SC5rOBbqJtyGFA7icibibHdCUiaicSUBuvhV3EbiaplKJDBibkFeZaptiaJQ7bbw/640?wx_fmt=png&from=appmsg) 找到 java-decompiler.jar  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCCnDAnD6FCKo7Yb9ibN7NIXPdjCKibjmcbkKwAESUxc0rKfRjneD99gicw/640?wx_fmt=png&from=appmsg)新建两个文件夹：cs_bin 和 cs_src  
将 cobaltstrike.jar 放入 cs_bin 文件夹中，将 java-decompiler.jar 放入项目根目录下 结构目录如下：

```
cobaltstrike
├─cs_bin
│   └─ cobaltstrike.jar
└─cs_src
└─java-decompiler.jar

```

在根目录输入以下命令将 cs_bin/cobaltstrike.jar 进行反编译，反编译后的文件放到 cs_src 文件夹中：

```
java -cp java-decompiler.jar org.jetbrains.java.decompiler.main.decompiler.ConsoleDecompiler -dgs=true cs_bin/cobaltstrike.jar cs_src/

```

正常反编译如下:![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCdnfKexz3pB1XYXmXubAtOywAG7jclnWUibN6lTP5Xk7O8sQ9n5Q7JwA/640?wx_fmt=png&from=appmsg)![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCdnfKexz3pB1XYXmXubAtOywAG7jclnWUibN6lTP5Xk7O8sQ9n5Q7JwA/640?wx_fmt=png&from=appmsg) 我反编译时遇到以下问题和疑惑：1. 使用 java-decompiler.jar 编译如下报错：![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCXYbQ7lvOoG0JN9icZyFGga8F11N64NicqYrzQfcVghTBua7e5fJHXWOQ/640?wx_fmt=png&from=appmsg)解决方案：因为高版本 IDEA 插件中的 java-decompiler.jar 需要使用 jdk17，以下为对应表![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCEH1RsBhZ9zdX1WFOdSdlGiceiazepzMtOkQ1T35Bom0QExUdtvob7zZQ/640?wx_fmt=png&from=appmsg)寻找低版本适用于 jdk11 的 java-decompiler.jar

 https://github.com/rongfengliang/java-decompiler-packages[3]

2. 为什么是用 java -cp 而不是用 java -jar 对 java-decompiler.jar 进行操作？因为使用 java -jar java-decompiler.jar 操作回显示没有主清单属性![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCVYMQejtvo2ks7oZic1DvjbEYjzZ43TfU6Bb7BlltRVsHX85W2IsDfYg/640?wx_fmt=png&from=appmsg)没有主类（Main-class）![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SC7VWSHebUxcLWePSl6pibARHZdlibYfu7z6epdFxbWj6Bh3KCJBicibt2QQ/640?wx_fmt=png&from=appmsg)java -cp 是使用 jar 包中某个类运行。打开 java-decompiler.jar 压缩包，这里使用的是 ConsoleDecompiler.class 类进行反编译，所以需要指定以下路径：org.jetbrains.java.decompiler.main.decompiler.ConsoleDecompiler![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCukCp2sIsdMtGBqVCfRWDWkwJ6pvT5iasksmMibxpL6WTOHu8wF67LWicw/640?wx_fmt=png&from=appmsg)

回归正常：新建 idea java 项目，工程命名为 cs，在工程下面新建两个文件夹：  
New-->Directory decompiled_src（放置反编译版 cs 解压后的文件） lib（放置原版 cs） 新版本创建 java 空项目不会显示 src 目录，可自行创建目录目录后，再添加为源根目录![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCuWRjjkxN5AeWTG3P9PHr3iamEpic4gXJBogDRZQib3vUUVPET7y0QBMjw/640?wx_fmt=png&from=appmsg)将反编译后的 jar 包放入 decompiled_src 目录下，然后解压后，删除原来的的 jar 包，如下为解压后的目录：![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SChzRcIbNPMWn2xyHTCA7C7fQ6CMjJPRtdIoR9yONJdvOSLgogVOoPPA/640?wx_fmt=png&from=appmsg)随后把 cs_bin/cobaltstrike.jar，复制到 lib 中  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCokGuoqkmKblNu4ibH7RSnl0y3Tyl1TU1V12r7icwpCUqnPibs3qibFj4Uw/640?wx_fmt=png&from=appmsg)接下来就是配置依赖：首先选择 jdk 的版本，我这里使用的是 11 版本。File->Project Structure->Project SDK 为自己下载的 11 版本![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCnexYWVWSwAGiaF3I6vNp7IUn8eDJjKINiaWzQGVz7ibbcWjibRcbibvFQeg/640?wx_fmt=png&from=appmsg)接下来点击 File->Project Structure->Modules，点击 Dependencies，Module SDK 选择自己下载的 11 版本， 再点击 + 号选择 JARs or Directories：选择 lib 中的原版 cobalt strike.jar，点击 ok，勾选：  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCImN0Sp2AhTia7SZxVIpFo9MTZJuZ6C393vWdrAvq41TiaXoAp0lyZ01g/640?wx_fmt=png&from=appmsg)![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCrBchIDxibQMAwLBPqic5bFGrGkymw5x2Ux6SjdNA0WRRFy9EkvKpy2YA/640?wx_fmt=png&from=appmsg)打开 lib->META-INF->MANIFEST.MF，可以看到 Main Class，复制 aggressor.Aggressor：![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SC1Iib9JXvasunYTiaCxXVuibEkuyhtwia8WlpiaWpWwqcT03rxfvDk8FxUew/640?wx_fmt=png&from=appmsg)至此依赖关系设置完了，现在进入 File->Project Structure->Artifacts—>JAR—>From modules with dependencies：Main Class 填入 aggressor.Aggressor，点击 ok，再点击 Apply：  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCI2WsN0icAxu0Caw4yTzyD3UcTgN7g6TaySy7HyQyiaiaABP6G87kCrkKA/640?wx_fmt=png&from=appmsg)![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCscibriaXw14zcsdBxCCWb3B0N5iabX9Bb5a8uYPxACxvnsjiaarnZdBPTA/640?wx_fmt=png&from=appmsg)接下来就是到 decompiled_src/aggressor/Aggressor.java，右键选择 Refactor->Copy File：  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCdpbDCib2F4ajLQA34Xjev7ric58PY1iaFeTWfJQQkOu63KMQiaZAY1ODOg/640?wx_fmt=png&from=appmsg)点击 To directory 右边的...：  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCh4UWSnPLAfz32TUHVEAsM8hrzxUBnkNVZscuD5rsOKyWcJc4KclR7g/640?wx_fmt=png&from=appmsg)新建目录，目录创建在 src 下，src 目录是我们进行修改代码的地方：  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCPEZXHmAbbEQE8ia1Pv8ibg12hUBl4ECLz5gUcVtkQvZNg5KNKKN81cJQ/640?wx_fmt=png&from=appmsg)创建 aggressor，名字必须要与 decompiled_src 一致，如果是在 aggressor 下拷贝的文件就要放在 src/aggressor 下。如果是在 aggressor/bridges 下拷贝的文件就要放在 src/aggressor/bridges 下，目录结构必须保持一致：  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCkOVNCnCIvut71bAazIvDG0eC2pVHchfENrnz9ndKvmJKpq0dpeZ8zg/640?wx_fmt=png&from=appmsg)完成上面的操作后 Aggressor.java 就被拷贝到 src/aggressor，并且自动打开了 Aggressor.java  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCFRNKS2hxf1WBTgibkDAqlKl7l7SzdzHX7icyvYEyeYZeUSWj9KWwib7CA/640?wx_fmt=png&from=appmsg)打开 decompiled_src/META-INF/MANIFEST.MF，把里面的所有内容复制到 src/META-INF/MANIFEST.MF 然后保存：![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCOunCqvnBaMH0pfgZbVWicuhGexQFx6oJ7BB8z5XyOVU9mozpytkbE7g/640?wx_fmt=png&from=appmsg)之后就是我们要修改哪个文件，就可以在完整的源码中找到那个文件，然后右键 Refactor 然后 Copy File 到这个目录然后进行修改，修改完成之后就可以选 Build—>Build Artifacts—>Build 进行编译：![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCkfpOdVrnUlk8KJsGYGUxCn54MTVR1BX2byNWYeEcMn0tMl4zDic90DA/640?wx_fmt=png&from=appmsg)![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCRwicUbqKaaJEClotEeIAd9ZGBZAjgL5LthpKnpsic9EL21dmC8VlF1nA/640?wx_fmt=png&from=appmsg)遇到报错:![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SC3PH8QxMBY8NLBOUic0WmmQ0k7cics0c6WFibubQmrtOqABf9fSsRepA1Q/640?wx_fmt=png&from=appmsg) 解决方案：在 File -->Settings 中配置 Java Compiler 的 Project bytecode version 为 11 ，点击 ok![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCGGiazyvVx7G5XZJvfOxmuBibVvhBicKBPYcubHctxjtlWqRBdgzTU1n8w/640?wx_fmt=png&from=appmsg)File-->Project Structure 的 Modules 中 Language level 默认选择的是 Project default，这里我们改成 11 版本，点击 ok![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCEbJjuF4iagbqz0bN2KrrEYupSXHz9mzBmqH8k9x0HqkAM6taSwftftQ/640?wx_fmt=png&from=appmsg)build 成功，编译后的文件在 out -> artifacts -> cs_jar -> cs.jar：  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCVVYjric08BjTdiaZrED3ex8uPSMc6awlSiaFKVib43XqVsKvoFicu4rx6Qw/640?wx_fmt=png&from=appmsg)直接点击 run 运行会显示确实参数![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCtNYE1VI2QAdDzM4D7ajz5e8ANPQ5IMQibdgIiceib9apUQvD7js7LljZQ/640?wx_fmt=png&from=appmsg)![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCRjd2LbkcguPLLKHC4vhEH4kfaicU0KMFdNW1busQmibu8wJiaOHbDIBwg/640?wx_fmt=png&from=appmsg)点击 Run->Profile->Edit Configurations 设置参数：  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCFgQKL2EdqZAKG7ibe8ndfw1VZsCAB1icKCjTvSXLHibXrkUAuzyLufxicg/640?wx_fmt=png&from=appmsg)点击 + 号，选择 JAR Application![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCYEKRQb7SJbqNNicn5YsCPAqRIwVia60fWuic36TZ6UPicpayYDH9Z6u9Hw/640?wx_fmt=png&from=appmsg)Name 可以随便输入，我输入的是 Cs1，在 Path to JAR 中选择 out 中我们修改并编译好的 jar 包， 设置 VM options：-XX:+AggressiveHeap -XX:+UseParallelGC 选择好后点击 Apply：  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCEPw3NjQMXbhDiccIhLl6kc78wGoiaLsFdRmRXYcYxpjia7aNSTFbtIzgQ/640?wx_fmt=png&from=appmsg)运行之后像下面这样就说明成功了，剩下的就是破解许可证和除掉插桩了：  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCSZ7gUcuZIASpCZYQr79aiawDjXL5oibGOFlxUrjLooqoRL6bHPic7XJyw/640?wx_fmt=png&from=appmsg)

破解永久许可和清除暗桩
-----------

### 破解永久许可

修改 / src/common/Authorization.java 文件：先在 src 目录下新建 common 目录，再复制一份 Authorization.java 到 src/common 目录下:  
![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCWQC97Hn7xAOh2pz90tZsCkCaGgK8wpyF40H0DogaA0ckzXY7tEnz6Q/640?wx_fmt=png&from=appmsg)使用以下代码对 Authorization() 方法进行覆盖：

```
public Authorization() {
   try {
      this.watermark=999999;
      this.validto="forever";
      this.valid = true;
      final byte[] bytes = {94, -104, 25, 74, 1, -58, -76, -113, -91, -126, -90, -87, -4, -69, -110, -42};
      MudgeSanity.systemDetail("valid to", "perpetual");
      MudgeSanity.systemDetail("id", this.watermark + "");
      SleevedResource.Setup(bytes);
   }
   catch (Exception ex2) {
      MudgeSanity.logException("auth file parsing", ex2, false);
   }
}

```

![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCZctEC1gOicrniaYBmaec1ORQibeXM16s9576FbXQ8QcN1u2QQvwrZaVQA/640?wx_fmt=png&from=appmsg)达到永久许可之后还是不能运行，因为存在暗桩。

### 清除暗桩

存在暗桩的地方：

```
common/Helper
common/Starter
common/Starter2
beacon/CommandBuilder

```

同样的方法先将以上的 Helper、Starter、Starter2 文件 copy 一份至 src/common 目录下。common 目录下的 Helper、Starter、Starter2 清除暗桩后可以进入客户端 ，需要定位代码中的 exit，再将其注释即可：![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCBton8YykmibiaBYO9fyBEVMnTYWTzdQt1PMcrKsV4UL6OWBajSjrqEicw/640?wx_fmt=png&from=appmsg)然后再 src 目录下新建一个 beacon 目录，复制 CommandBuilder 到 beacon 中，beacon/CommandBuilder 中的暗桩会让 client 和 temserver 连续连接 4 小时后无法执行命令，将这部分注释掉即可：![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCvtUEKWVJWLglFYNF1YaRGoP5A7gIhIcaLVY5Wia5YZDzSDg6N9F1S8Q/640?wx_fmt=png&from=appmsg)![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCvtUEKWVJWLglFYNF1YaRGoP5A7gIhIcaLVY5Wia5YZDzSDg6N9F1S8Q/640?wx_fmt=png&from=appmsg)然后重新 build，再点击 run 就可以正常运行![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KzduB4PicQp4HuU6bWo3MmibVqNSUHiaxtEarnH3bjDld7TYlglfp7f6r8zQvlJOFz1hl0uxeDHnRow/640?wx_fmt=png&from=appmsg)

运行 cs
-----

### 服务端

### linux 环境

正常启动需要 teamserver、cobaltstrike.auth、cobaltstrike.jar teamserver 文件：之后只需要修改最后一行 cobaltstrike.jar 对应的包名即可

```
#!/bin/bash
#
# Start Cobalt Strike Team Server
#
# make pretty looking messages (thanks Carlos)
function print_good () {
    echo -e "\x1B[01;32m[+]\x1B[0m $1"
}
function print_error () {
    echo -e "\x1B[01;31m[-]\x1B[0m $1"
}
function print_info () {
    echo -e "\x1B[01;34m[*]\x1B[0m $1"
}
# check that we're r00t
if [ $UID -ne 0 ]; then
    print_error "Superuser privileges are required to run the team server"
    exit
fi
# check if java is available...
if [ $(command -v java) ]; then
    true
else
    print_error "java is not in \$PATH"
    echo "    is Java installed?"
    exit
fi
# check if keytool is available...
if [ $(command -v keytool) ]; then
    true
else
    print_error "keytool is not in \$PATH"
    echo "    install the Java Developer Kit"
    exit
fi
# generate a certificate
    # naturally you're welcome to replace this step with your own permanent certificate.
    # just make sure you pass -Djavax.net.ssl.keyStore="/path/to/whatever" and
    # -Djavax.net.ssl.keyStorePassword="password" to java. This is used for setting up
    # an SSL server socket. Also, the SHA-1 digest of the first certificate in the store
    # is printed so users may have a chance to verify they're not being owned.
if [ -e ./cobaltstrike.store ]; then
    print_info "Will use existing X509 certificate and keystore (for SSL)"
else
    print_info "Generating X509 certificate and keystore (for SSL)"
    keytool -keystore ./cobaltstrike.store -storepass 123456 -keypass 123456 -genkey -keyalg RSA -alias cobaltstrike -dname "CN=Microsoft IT TLS CA 5, OU=Microsoft IT, O=Microsoft Corporation, L=Redmond, S=Washington, C=US"
fi
# start the team server.
java -XX:ParallelGCThreads=4 -Dcobaltstrike.server_port=50050 -Dcobaltstrike.server_bindto=0.0.0.0 -Djavax.net.ssl.keyStore=./cobaltstrike.store -Djavax.net.ssl.keyStorePassword=123456 -server -XX:+AggressiveHeap -XX:+UseParallelGC -classpath ./cobaltstrike.jar:. -Duser.language=en server.TeamServer $*

```

首先将以上三个文件上传至服务器，这次试验我的 jar 包名为 cs.jar，修改以下 teamserver 文件![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCgMOhHl6ZJAKbAL2k23frbkPGqBEcqcXgviboyYHas3W4pn0PB6MIqwg/640?wx_fmt=png&from=appmsg)给予 teamserver 权限：

```
chmod 777 teamserver

```

然后运行 teamserver：./teamserver ip 密码

```
./teamserver your-ip passwd

```

执行后会生成一个 cobaltstrike.store 文件![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCYiciaft69zACVyECibF8qia9oo40oTTStBrCqPDU7p0jSw04ejHGGwibhmw/640?wx_fmt=png&from=appmsg)

客户端
---

```
java -Dfile.encoding=UTF-8 -XX:ParallelGCThreads=4 -XX:+AggressiveHeap -XX:+UseParallelGC -jar cs.jar

```

![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KzduB4PicQp4HuU6bWo3MmibsAkAgXU8gYicmzqXjfyRMlTUdDiaT08zcNUsCXWo34ho6vW8SadfuS4Q/640?wx_fmt=png&from=appmsg)输入之前服务端开的 ip，端口（为 50050，可修改 teamserver 文件中的 server_port)，password(passwd), 然后点击 connect，第一次连接会显示以下确认指纹窗口：![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCs0A2WtyZCyda4o2T7rco8UuvXfVrY1V6xiavjXPB3KMIEiaXWgkPOZDg/640?wx_fmt=png&from=appmsg)点击是，就成功进入 cobalt strike![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCk3scZBCciaemGnpluGQdWLpiag5YGiboAhnYY60XrBwcvwzp4ibN4x2u6g/640?wx_fmt=png&from=appmsg) 并且在服务端生成一个文件，之后的连接就不会显示确认指纹窗口了。![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SC7WGewgU9icPdG7zNQiaysP4MEOazCnh60VIcnK3Jy91iazvJCoSJKn6Pw/640?wx_fmt=png&from=appmsg)

### References

`[1]`: _https://github.com/k8gege/Aggressor/releases/tag/cs_  
`[2]`: _https://verify.cobaltstrike.com/_  
`[3]`: _https://github.com/rongfengliang/java-decompiler-packages_

  

![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SC69DictmopaRlialzcXibKF0TRKaRiaqeGKm0ejMHpfMzmBsTPjMTE8Gr2g/640?wx_fmt=png&from=appmsg)![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCS0EKS6ArfwF7aVib38XWQmULUWxXVz74jD4aaRaG5pByKbtNNr7d1Ng/640?wx_fmt=png&from=appmsg)

往期推荐

[2024 初级蓝队 HW 面试题](http://mp.weixin.qq.com/s?__biz=Mzk0MTY5NzYyOA==&mid=2247484441&idx=1&sn=532190dd3a926f4cd7a9f6eeb65dcca1&chksm=c2cf3b2af5b8b23c060c2f9dc20626d497bdc2c0a8d1c70e530c2a5f5c608a670307ae8bb02d&scene=21#wechat_redirect)

[2024hw 蓝队面试题合集](http://mp.weixin.qq.com/s?__biz=Mzk0MTY5NzYyOA==&mid=2247484172&idx=1&sn=c4507888f256cac71f93ccdf0a01787e&chksm=c2cf3c3ff5b8b5290451200abefd57c138d491e6aace96f9df665e0243fe9e00e9f7f9ee96db&scene=21#wechat_redirect)  

  

  

![](https://mmbiz.qpic.cn/mmbiz_png/AbAaoHnsh8KUPCWUUabGNsOyLkFI85SCsDibEsgvJNgEbOrviaQSRlvvNiasxaPvCvM6SLic2ohrvzSUeolmBhHdng/640?wx_fmt=png&from=appmsg)

转载美三代  点赞富一生