<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/vm8PtACurKm3_lVzTAjzOA)

扫码领资料

获网安教程

免费 & 进群

![](https://mmbiz.qpic.cn/mmbiz_png/CBJYPapLzSFJNibV2baHRo8G34MZhFD1sjTz4LHLiaKG9208VTU6pdTIEpC9jlW6UVfhIb9rHorCvvMsdiaya4T6Q/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

![](https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaaJcib7FH02wTKvoHALAMw4fchVnBLMw4kTQ7B9oUy0RGfiacu34QEZgDpfia0sVmWrHcDZCV1Na5wDQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

  

**前言**  

某次企业 SRC 的一次实战。其中通过信息收集发现了一个站点，这里为内部系统，访问的时候居然直接一片空白，是空白页面。难道空白页面就没有漏洞吗？我就偏偏不信这个邪，上手就是干！

**过程**
======

https://x,x.com/  
打开页面啥也没有，一片空白:  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6lib47PPy6TL8iahdpsWkb6DVsN7X5jIKB1gzpuzdx4Hb4V6zdYiblQbhg/640?wx_fmt=png)

其中这里按下键盘中的 F12，通过审计 js 后，发现接口：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6jqhSzo3zCMiaXQhz0yqgmJ6MfbHNDplxibQ0B1tKf8pO5ibdgvZv8EJiaw/640?wx_fmt=png)

其中的一个接口 / api/plugin/directory/getLastUsedDirId 拼接后，如下提示：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6ns1EBIxRJf6AyNla2T4UVU0dEefYIa7rcWF2DibOeEL3YFibsn8Saxow/640?wx_fmt=png)

其中响应包中响应的 “插件分类不能为空” 让我百思不得其解，不知道是缺了什么参数。那么这里就再回到 js 中看看吧，果然，给我发现了端倪：  
这里再查看 js，发现其中给出提示，原来是 header 要加如下字段：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw604ibiaDGg4NDP8nBadxWDd67RyXs0tt0IOicSicgfUvLMEy9GYVlBIxGcA/640?wx_fmt=png)

那么我加了其中一个字段 category，发现成功，但是却又报了非法用户登录。那么这里就必须需要 Authorization 认证字段了：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6Hon13AjY1ddlFuOWyEmhJlwBc7180OKZVAkdnn1F6Il3EXEgza7gEA/640?wx_fmt=png)

因此这里就又碰到了一个棘手的问题，Authorization 认证字段这个一般都是成功登录系统后才会赋予给用户的一个值，而这个地方连页面都是空白的，那么这里到底去哪里寻找 Authorization 认证字段的值呢？

这里贯彻着遇事不决看 js 的思想，继续来审计 js，终于发现了解决方法：  
其中在 js 中发现了 login 接口。这里存在该逻辑漏洞：id:t.id||"1234",name:t.name||"1234",organizationCode:t.organizationCode||-1。这里用了 || 或，那么言下之意就是如果不知道 id、name 和 organizationCode 的话，就可以直接 id 参数和 name 参数都填 1234，organizationCode 填 - 1

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6dOW6eFtuqPt1duIPTqFR5vZ3Sdlsf9cBFGeWXdhliaqONVOcCrbrHRg/640?wx_fmt=png)

login 接口，这里真成功了，其中获取到 data

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6thUaH9fhBArdibKPree3Iy395iaBeLnA9hjSOn6eCGZZHyPicMSxniczDQ/640?wx_fmt=png)

那么这里猜测 data 的值即为那个 Authorization 认证字段的值，这里填入：

发现成功调用接口：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6EOhnnFA7eGx8kd5IavhRzjnib3e6uDrAKtnnFE6geCzASOcwBn44ibPQ/640?wx_fmt=png)

那么这里其中的接口就都可以成功调用了：

像这里的获取内部数据等等

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6I3QrPVMWRJxnJBdxLz2c77ojlMoqp0wflWhc4LZu6WJu5a1Dlh9xRw/640?wx_fmt=png)

这里最关键的一个接口来了：  
这里通过 js 审计到查看 oss 配置信息的接口：  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6R5ek9V72ggTD3jCNwy71uLKaTG3d9OKpic1b1exA4lEd92Q8AyvdPhQ/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6jdlCJJ5DYIIn3nQfGNsmo8gmNygia510gLz2tSsAvG5slV8NLwEkFYw/640?wx_fmt=png)

这里因为是阿里云的，所以这里直接使用 oss browser 来进行利用，利用成功：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6cYAgnkHI1icWBj7h440xJtnjELCtrsE6Fiapb8PWDBjhSKicWXicXqZYNA/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6zHKV1P6FPLml6Fo5QrvGxwnowlJriaGbNWogCiaISibxm4MjC23Agr5Ew/640?wx_fmt=png)

这些直接可以下载到后端的源码：

其中反编译出来直接为后端源码，泄露许多严重敏感信息

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6AS9E6ROG9NElILsDibnEbIDwictefNScTW1zY63CjItqE1ByIB1ibr2qA/640?wx_fmt=png)

后端的配置信息：

其中还有数据库密码等等敏感信息

![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw63lvrqvYianYlNia5HK0U5DuTQF8gkmsr5h4IgibfxkSJqeUVIfGfDKReQ/640?wx_fmt=png)

反编译出来的后端源码：  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/CBJYPapLzSEqiaUxvIDicXLnMVicptqoZw6ryyoicJdkibqSRRHUOQUD1HNDHNfLvUcz2Trg2NZGyIhqbviaTkEZoQeg/640?wx_fmt=png)

最后的最后，当然也是给了严重的漏洞等级，舒服了！

```
来源：https://forum.butian.net/share/2510

```

声明：⽂中所涉及的技术、思路和⼯具仅供以安全为⽬的的学习交流使⽤，任何⼈不得将其⽤于⾮法⽤途以及盈利等⽬的，否则后果⾃⾏承担。**所有渗透都需获取授权**！

@

**学习更多渗透技能！体验靶场实战练习**

```
（hack视频资料及工具）


```

（部分展示）

往期推荐

【精选】SRC 快速入门 + 上分小秘籍 + 实战指南

爬取免费代理，拥有自己的代理池

漏洞挖掘｜密码找回中的套路

渗透测试岗位面试题 (重点：渗透思路)

漏洞挖掘 | 通用型漏洞挖掘思路技巧

干货｜列了几种均能过安全狗的方法！

一名大学生的黑客成长史到入狱的自述

攻防演练｜红队手段之将蓝队逼到关站！

巧用 FOFA 挖到你的第一个漏洞

**看到这里了，点个 “赞”、“再看” 吧**