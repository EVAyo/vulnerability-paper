<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [blog.csdn.net](https://blog.csdn.net/qq_14829643/article/details/134346394)

想要使用 `nc`（netcat）命令来实现将本机 8848 端口的流量转发到另一台机器（10.0.0.2）上的 8848 端口。这可以通过在机器上创建一个简单的端口转发规则来实现。以下是一个基本的命令示例：

```
nc -lk 8848 | nc 10.0.0.1 8848

```

这个命令的作用如下：

*   `nc -lk 8848`: 这部分会在您的机器上的 8848 端口启动 `nc`，并且监听（`-l`）该端口。`-k` 选项表示即使一个连接被关闭后，也会继续监听新的连接。
*   `|`: 这个管道符号会将第一个 `nc` 命令的输出（即从本机 8848 端口收到的数据）传递给第二个 `nc` 命令。
*   `nc 10.0.0.1 8848`: 这部分将接收到的数据转发到 10.0.0.1 上的 8848 端口。

请注意，在实际应用中，可能需要考虑流量的加密和身份验证问题，以确保数据传输的安全性。此外，根据现场的网络配置和防火墙设置，可能还需要进行额外的配置来允许这种类型的流量转发。

### 转发请求加相应

要实现流量转发并且还能返回响应，我们需要使用稍微复杂一点的方法。`nc`（netcat）本身并不直接支持反向流量转发，但可以通过创建一个简单的脚本来实现这个功能。

这里有一个使用 `bash` 脚本和 `nc` 命令的基本示例：

```
#!/bin/bash

while true; do
{ 
    echo "Connection received"; 
    nc -c "nc 10.76.68.76 8848" 
} | nc -lk 8848
done

```

这个脚本的工作原理如下：

*   外层的 `while true; do ... done` 循环确保脚本持续运行，即使在单个连接关闭之后。
*   `{ ... } | nc -lk 8848` 是一个命令块，它会在本机的 8848 端口上启动 `nc` 并监听该端口。
*   `echo "Connection received"` 仅为示例，表示每当有新连接时，它会显示一条消息。您可以根据需要修改或删除这个 echo 命令。
*   `nc -c "nc 10.76.68.76 8848"` 是关键部分。这里，`-c` 选项允许指定要执行的命令。当有数据到达时，这个命令会启动一个新的 `nc` 进程，将数据转发到 10.76.68.76 上的 8848 端口，并将响应返回给原始请求者。

要使用此脚本，请将其保存为一个文件（例如 `forward.sh`），赋予执行权限（使用 `chmod +x forward.sh`），然后运行它。

请注意，这个脚本是一个基本的示例，可能需要根据具体需求进行调整。特别是在生产环境中，应考虑使用更专业的解决方案，例如反向代理服务器，来处理复杂的流量转发和安全问题。